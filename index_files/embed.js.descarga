/*! For license information please see embed.js.LICENSE.txt */
(()=>{var e,t,i={401:(e,t,i)=>{"use strict";i.d(t,{Eq:()=>p,FLOATING_PLAYER_NAVIGATION_MODES:()=>u,In:()=>m,K0:()=>d,ORIENTATION:()=>f,Pr:()=>w,Ug:()=>_,Ze:()=>l,bZ:()=>o,hN:()=>a,hT:()=>v,hw:()=>n,mL:()=>r,sJ:()=>y,wh:()=>s,yM:()=>g});const n="livecommerce:",r={EXTERNAL_EVENT_HANDLERS:`${n}external-event-handlers`,ADD_TO_CART:`${n}should-add-item-to-cart`,CHAT_MESSAGES:`${n}chat-messages`,CHECKOUT:`${n}goto-checkout`,CLOSE:`${n}close`,CURRENT_BASEPAGE_SCROLLTOP:`${n}current-basepage-scrolltop`,CURRENT_BASEPAGE_VIEWPORT:`${n}current-basepage-viewport`,DO_SYNC_CART_STATE:`${n}sync-cart-state`,FOCUS_FIRST_INSIDE_IFRAME:`${n}focus-first-inside-iframe`,FOCUS_FIRST_OUTSIDE_IFRAME:`${n}focus-first-outside-iframe`,FOCUS_LAST_INSIDE_IFRAME:`${n}focus-last-inside-iframe`,FOCUS_LAST_OUTSIDE_IFRAME:`${n}focus-last-outside-iframe`,FOCUS_LEAVE:`${n}focus-leave`,FULLSCREEN_ENTER:`${n}fullscreen-enter`,FULLSCREEN_EXIT:`${n}fullscreen-exit`,HIDE_CART:`${n}should-hide-cart`,HIDE_CHAT_OVERLAY:`${n}should-hide-chat-overlay`,HIDE_PRODUCT_LIST:`${n}should-hide-product-list`,HIDE_UI:`${n}should-hide-ui`,MINI_PLAYER_DRAG_END:`${n}mini-player-drag-end`,MINI_PLAYER_MOVE:`${n}mini-player-move`,MINI_PLAYER_RESTORE:`${n}mini-player-restore`,MINIMIZE:`${n}minimize`,MINIMIZED_ACTION_OVERLAY:`${n}minimized-action-overlay`,NAVIGATE_BEHIND_TO:`${n}navigate-behind-to`,ON_PROGRESS:`${n}on-progress-update`,OPEN_EXTERNAL_BROWSER_SUCCESS:`${n}open-external-browser-success`,OPEN_EXTERNAL_BROWSER:`${n}open-external-browser`,PLAYER_SWIPE_DOWN:`${n}player-swipe-down`,PLAYER_SWIPE_LEFT:`${n}player-swipe-left`,PLAYER_SWIPE_RIGHT:`${n}player-swipe-right`,PLAYER_SWIPE_UP:`${n}player-swipe-up`,PROVIDE_PRODUCT_DATA:`${n}provide-product-data`,LOAD:`${n}load`,READY:`${n}ready`,RESET_BASE_PAGE_SCROLL:`${n}reset-base-page-scroll`,RESPONSE:`${n}response`,SET_CLOSE_ICON:`${n}set-close-icon`,SET_RESTORE_ICON:`${n}set-restore-icon`,SET_VIEWPORT_STATE:`${n}set-viewport-state`,SET_VIDEO_STATE:`${n}set-video-state`,SHOW_ADD_TO_CALENDAR:`${n}should-show-add-to-calendar`,SHOW_EMOJI_BATCH:`${n}should-show-emoji-batch`,SHOW_CART:`${n}should-show-cart`,SHOW_CHAT_OVERLAY:`${n}should-show-chat-overlay`,SHOW_PRODUCT_LIST:`${n}should-show-product-list`,SHOW_PRODUCT_VIEW:`${n}should-show-product-view`,HIDE_PRODUCT_VIEW:`${n}should-hide-product-view`,SHOW_SHARE:`${n}should-show-share`,SHOW_UI:`${n}should-show-ui`,SUBSCRIBE:`${n}subscribe`,SYNC_CART_STATE:`${n}should-sync-cart-state`,TRACKING_POINT:`${n}tracking-point`,TRACKING_SEND_EVENT:`${n}tracking-send-event`,UNSUBSCRIBE:`${n}unsubscribe`,UPDATE_ITEM_IN_CART:`${n}should-update-item-in-cart`,UPDATE_SHOW_STATUS:`${n}should-update-show-status`,UPDATE_PRODUCT_HIGHLIGHT:`${n}should-update-product-highlight`,PRODUCT_HIGHLIGHT_LIST:`${n}product-highlight-list`,NOTIFY_URL_CHANGE:`${n}notify-url-change`,EXTERNAL_PLAYER_CONTROLLER_NEW:`${n}external-player-controller-new`,EXTERNAL_PLAYER_CONTROLLER_CHANGE:`${n}external-player-controller-change`,EXTERNAL_PLAYER_CONTROLLER_EVENTS:`${n}external-player-controller-events`,EXTERNAL_PLAYER_CONTROLLER_PLAY:`${n}external-player-controller-play`,EXTERNAL_PLAYER_CONTROLLER_PAUSE:`${n}external-player-controller-pause`,EXTERNAL_PLAYER_CONTROLLER_MUTE:`${n}external-player-controller-mute`,EXTERNAL_PLAYER_CONTROLLER_SEEK:`${n}external-player-controller-seek`,EXTERNAL_PLAYER_CONTROLLER_LOAD:`${n}external-player-controller-load`,EXTERNAL_PLAYER_CONTROLLER_HIDE:`${n}external-player-controller-hide`,EXTERNAL_PLAYER_CONTROLLER_SHOW:`${n}external-player-controller-show`,EXTERNAL_PLAYER_CONTROLLER_REMOVE:`${n}external-player-controller-remove`,PLAY:`${n}play`,PAUSE:`${n}pause`,MUTE:`${n}mute`,UNMUTE:`${n}unmute`,SEEK_TO_PERCENT:`${n}seek-to-percent`,PLAYBACK_STATUS:`${n}playback-status`,PLAYER_CONTAINER_UPDATE:`${n}player-container-update`,REQUEST_PICTURE_IN_PICTURE:`${n}request-picture-in-picture`,EXIT_PICTURE_IN_PICTURE:`${n}exit-picture-in-picture`,ENTERED_PICTURE_IN_PICTURE:`${n}entered-picture-in-picture`,EXITED_PICTURE_IN_PICTURE:`${n}exited-picture-in-picture`},s=Object.entries(r).reduce(((e,t)=>{let[i,r]=t;return e[i]=r.replace(n,""),e}),{}),o="livecommerce-surf:",a={ACCEPTED_REQUEST_OPEN_SHOW:`${o}accepted-request-open-show`,REQUEST_OPEN_SHOW:`${o}request-open-show`,REQUEST_SURF_BEHIND_TO:`${o}request-surf-behind-to`},l={AUTO:"auto",CLOSE:"close",INLINE:"inline",LINK:"link",MINIMIZE:"minimize",NONE:"none"},d=[r.ADD_TO_CART,r.CHECKOUT,r.PROVIDE_PRODUCT_DATA,r.UPDATE_ITEM_IN_CART],c=[r.CHAT_MESSAGES,r.HIDE_PRODUCT_LIST,r.HIDE_CART,r.HIDE_CHAT_OVERLAY,r.PLAYER_SWIPE_DOWN,r.PLAYER_SWIPE_LEFT,r.PLAYER_SWIPE_RIGHT,r.PLAYER_SWIPE_UP,r.SHOW_ADD_TO_CALENDAR,r.SHOW_EMOJI_BATCH,r.SHOW_PRODUCT_LIST,r.SHOW_CART,r.SHOW_CHAT_OVERLAY,r.SHOW_PRODUCT_VIEW,r.HIDE_PRODUCT_VIEW,r.SHOW_SHARE,r.SUBSCRIBE,r.UNSUBSCRIBE,r.UPDATE_SHOW_STATUS,r.UPDATE_PRODUCT_HIGHLIGHT,r.NOTIFY_URL_CHANGE,r.PLAYBACK_STATUS,r.PLAYER_CONTAINER_UPDATE,r.ENTERED_PICTURE_IN_PICTURE,r.EXITED_PICTURE_IN_PICTURE],h=[r.LOAD],u={IFRAME_SRCDOC:"srcdoc",IFRAME:"iframe",MANUAL:"manual"},p=[].concat(d,c,h),m={STAGE:"G-2GD03VB4T7",PROD:"G-MY3DDVP96E"},g="_bamls",y={CUSTOMER_ID:`${g}_cuid`,LAST_INTERACTION_TIMESTAMP:`${g}_lits`,SESSION_ID:`${g}_seid`,SHOW_ID:`${g}_shid`,USER_ID:`${g}_usid`},f={EAST:"E",NORTH_EAST:"NE",NORTH_WEST:"NW",NORTH:"N",SOUTH_EAST:"SE",SOUTH_WEST:"SW",SOUTH:"S",WEST:"W"},_={BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",TOP_LEFT:"top-left",TOP_RIGHT:"top-right"},w={SMALL:"small",LARGE:"large"},v={HORIZONTAL:"horizontal",VERTICAL:"vertical"}},630:function(e){e.exports=function(e){var t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={i:n,l:!1,exports:{}};return e[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=90)}({17:function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var n=i(18),r=function(){function e(){}return e.getFirstMatch=function(e,t){var i=t.match(e);return i&&i.length>0&&i[1]||""},e.getSecondMatch=function(e,t){var i=t.match(e);return i&&i.length>1&&i[2]||""},e.matchAndReturnConst=function(e,t,i){if(e.test(t))return i},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,i,n){void 0===n&&(n=!1);var r=e.getVersionPrecision(t),s=e.getVersionPrecision(i),o=Math.max(r,s),a=0,l=e.map([t,i],(function(t){var i=o-e.getVersionPrecision(t),n=t+new Array(i+1).join(".0");return e.map(n.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(n&&(a=o-Math.min(r,s)),o-=1;o>=a;){if(l[0][o]>l[1][o])return 1;if(l[0][o]===l[1][o]){if(o===a)return 0;o-=1}else if(l[0][o]<l[1][o])return-1}},e.map=function(e,t){var i,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(i=0;i<e.length;i+=1)n.push(t(e[i]));return n},e.find=function(e,t){var i,n;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(i=0,n=e.length;i<n;i+=1){var r=e[i];if(t(r,i))return r}},e.assign=function(e){for(var t,i,n=e,r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];if(Object.assign)return Object.assign.apply(Object,[e].concat(s));var a=function(){var e=s[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){n[t]=e[t]}))};for(t=0,i=s.length;t<i;t+=1)a();return e},e.getBrowserAlias=function(e){return n.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return n.BROWSER_MAP[e]||""},e}();t.default=r,e.exports=t.default},18:function(e,t,i){"use strict";t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var n,r=(n=i(91))&&n.__esModule?n:{default:n},s=i(18);function o(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(){}var t,i;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new r.default(e,t)},e.parse=function(e){return new r.default(e).getResult()},t=e,i=[{key:"BROWSER_MAP",get:function(){return s.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return s.ENGINE_MAP}},{key:"OS_MAP",get:function(){return s.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return s.PLATFORMS_MAP}}],null&&o(t.prototype,null),i&&o(t,i),e}();t.default=a,e.exports=t.default},91:function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var n=l(i(92)),r=l(i(93)),s=l(i(94)),o=l(i(95)),a=l(i(17));function l(e){return e&&e.__esModule?e:{default:e}}var d=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=a.default.find(n.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=a.default.find(r.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=a.default.find(s.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=a.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return a.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,i={},n=0,r={},s=0;if(Object.keys(e).forEach((function(t){var o=e[t];"string"==typeof o?(r[t]=o,s+=1):"object"==typeof o&&(i[t]=o,n+=1)})),n>0){var o=Object.keys(i),l=a.default.find(o,(function(e){return t.isOS(e)}));if(l){var d=this.satisfies(i[l]);if(void 0!==d)return d}var c=a.default.find(o,(function(e){return t.isPlatform(e)}));if(c){var h=this.satisfies(i[c]);if(void 0!==h)return h}}if(s>0){var u=Object.keys(r),p=a.default.find(u,(function(e){return t.isBrowser(e,!0)}));if(void 0!==p)return this.compareVersion(r[p])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var i=this.getBrowserName().toLowerCase(),n=e.toLowerCase(),r=a.default.getBrowserTypeByAlias(n);return t&&r&&(n=r.toLowerCase()),n===i},t.compareVersion=function(e){var t=[0],i=e,n=!1,r=this.getBrowserVersion();if("string"==typeof r)return">"===e[0]||"<"===e[0]?(i=e.substr(1),"="===e[1]?(n=!0,i=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?i=e.substr(1):"~"===e[0]&&(n=!0,i=e.substr(1)),t.indexOf(a.default.compareVersions(r,i,n))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=d,e.exports=t.default},92:function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var n,r=(n=i(17))&&n.__esModule?n:{default:n},s=/version\/(\d+(\.?_?\d+)+)/i,o=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},i=r.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||r.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},i=r.default.getFirstMatch(s,e)||r.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},i=r.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||r.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},i=r.default.getFirstMatch(s,e)||r.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},i=r.default.getFirstMatch(s,e)||r.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},i=r.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||r.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},i=r.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||r.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},i=r.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||r.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},i=r.default.getFirstMatch(s,e)||r.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},i=r.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},i=r.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},i=r.default.getFirstMatch(s,e)||r.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},i=r.default.getFirstMatch(s,e)||r.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},i=r.default.getFirstMatch(s,e)||r.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},i=r.default.getFirstMatch(s,e)||r.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},i=r.default.getFirstMatch(s,e)||r.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},i=r.default.getFirstMatch(s,e)||r.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},i=r.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},i=r.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},i=r.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},i=r.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},i=r.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},i=r.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},i=r.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},i=r.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return i&&(t.version=i),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},i=r.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},i=r.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},i=r.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},i=r.default.getFirstMatch(s,e)||r.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},i=r.default.getFirstMatch(s,e)||r.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},i=r.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},i=r.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},i=r.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},i=r.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},i=r.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},i=r.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},i=r.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||r.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},i=r.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},i=r.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:function(e){var t=!e.test(/like android/i),i=e.test(/android/i);return t&&i},describe:function(e){var t={name:"Android Browser"},i=r.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},i=r.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},i=r.default.getFirstMatch(s,e);return i&&(t.version=i),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:r.default.getFirstMatch(t,e),version:r.default.getSecondMatch(t,e)}}}];t.default=o,e.exports=t.default},93:function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var n,r=(n=i(17))&&n.__esModule?n:{default:n},s=i(18),o=[{test:[/Roku\/DVP/],describe:function(e){var t=r.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:s.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=r.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=r.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),i=r.default.getWindowsVersionName(t);return{name:s.OS_MAP.Windows,version:t,versionName:i}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:s.OS_MAP.iOS},i=r.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return i&&(t.version=i),t}},{test:[/macintosh/i],describe:function(e){var t=r.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),i=r.default.getMacOSVersionName(t),n={name:s.OS_MAP.MacOS,version:t};return i&&(n.versionName=i),n}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=r.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:s.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),i=e.test(/android/i);return t&&i},describe:function(e){var t=r.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),i=r.default.getAndroidVersionName(t),n={name:s.OS_MAP.Android,version:t};return i&&(n.versionName=i),n}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=r.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),i={name:s.OS_MAP.WebOS};return t&&t.length&&(i.version=t),i}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=r.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||r.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||r.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:s.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=r.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=r.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=r.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:s.OS_MAP.PlayStation4,version:t}}}];t.default=o,e.exports=t.default},94:function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var n,r=(n=i(17))&&n.__esModule?n:{default:n},s=i(18),o=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=r.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",i={type:s.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(i.model=t),i}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),i=e.test(/like (ipod|iphone)/i);return t&&!i},describe:function(e){var t=r.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:s.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];t.default=o,e.exports=t.default},95:function(e,t,i){"use strict";t.__esModule=!0,t.default=void 0;var n,r=(n=i(17))&&n.__esModule?n:{default:n},s=i(18),o=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:s.ENGINE_MAP.Blink};var t=r.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:s.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:s.ENGINE_MAP.Trident},i=r.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:s.ENGINE_MAP.Presto},i=r.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:function(e){var t=e.test(/gecko/i),i=e.test(/like gecko/i);return t&&!i},describe:function(e){var t={name:s.ENGINE_MAP.Gecko},i=r.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:s.ENGINE_MAP.WebKit},i=r.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return i&&(t.version=i),t}}];t.default=o,e.exports=t.default}})}},n={};function r(e){var t=n[e];if(void 0!==t)return t.exports;var s=n[e]={exports:{}};return i[e].call(s.exports,s,s.exports,r),s.exports}r.m=i,r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var i in t)r.o(t,i)&&!r.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,i)=>(r.f[i](e,t),t)),[])),r.u=e=>"surf-srcdoc-frame.bundle.js",r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),e={},t="livecommerce-embed:",r.l=(i,n,s,o)=>{if(e[i])e[i].push(n);else{var a,l;if(void 0!==s)for(var d=document.getElementsByTagName("script"),c=0;c<d.length;c++){var h=d[c];if(h.getAttribute("src")==i||h.getAttribute("data-webpack")==t+s){a=h;break}}a||(l=!0,(a=document.createElement("script")).charset="utf-8",a.timeout=120,r.nc&&a.setAttribute("nonce",r.nc),a.setAttribute("data-webpack",t+s),a.src=i),e[i]=[n];var u=(t,n)=>{a.onerror=a.onload=null,clearTimeout(p);var r=e[i];if(delete e[i],a.parentNode&&a.parentNode.removeChild(a),r&&r.forEach((e=>e(n))),t)return t(n)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:a}),12e4);a.onerror=u.bind(null,a.onerror),a.onload=u.bind(null,a.onload),l&&document.head.appendChild(a)}},r.p="https://lcx-embed.bambuser.com/",(()=>{var e={179:0};r.f.j=(t,i)=>{var n=r.o(e,t)?e[t]:void 0;if(0!==n)if(n)i.push(n[2]);else{var s=new Promise(((i,r)=>n=e[t]=[i,r]));i.push(n[2]=s);var o=r.p+r.u(t),a=new Error;r.l(o,(i=>{if(r.o(e,t)&&(0!==(n=e[t])&&(e[t]=void 0),n)){var s=i&&("load"===i.type?"missing":i.type),o=i&&i.target&&i.target.src;a.message="Loading chunk "+t+" failed.\n("+s+": "+o+")",a.name="ChunkLoadError",a.type=s,a.request=o,n[1](a)}}),"chunk-"+t,t)}};var t=(t,i)=>{var n,s,o=i[0],a=i[1],l=i[2],d=0;if(o.some((t=>0!==e[t]))){for(n in a)r.o(a,n)&&(r.m[n]=a[n]);l&&l(r)}for(t&&t(i);d<o.length;d++)s=o[d],r.o(e,s)&&e[s]&&e[s][0](),e[s]=0},i=self.webpackChunklivecommerce_embed=self.webpackChunklivecommerce_embed||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})(),(()=>{"use strict";var e=r(401);class t extends Error{constructor(e){super(e),this.name="BambuserLiveShoppingError"}}var i=r(630),n=r.n(i);let s=null;let o=null,a=null;function l(){if(null===a){const e=navigator.userAgent||navigator.vendor||window.opera;a=/iPad|iPhone|iPod/.test(e)&&!window.MSStream}return a}let d,c,h=null;function u(){if(null===h){const e=navigator.maxTouchPoints>1;h="MacIntel"===navigator.platform&&e&&!window.MSStream}return h}const p=window.navigator.userAgent.match(/^targetapp_(android|ios)_([0-9]+).*$/);function m(){return navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&-1===navigator.userAgent.indexOf("CriOS")&&-1===navigator.userAgent.indexOf("FxiOS")}function g(){if("ios"===d)return c;let e=navigator.userAgent.match(/OS (\d+)_(\d+)_?(\d+)?/);return e?parseInt(e[1],10):(e=navigator.userAgent.match(/FBSV\/(\d+(\.\d)*);/),e?parseInt(e[1],10):0)}function y(e){return e&&(e.withMinimizeSupport||e._isEmbedContext)&&l()&&!(null!==function(){const e=navigator.userAgent.match(/Instagram (\d+)/);return e?parseInt(e[1],10):null}()&&window.screen.height-window.innerHeight<=44)}p&&function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;d=e,c="string"==typeof t?parseInt(t,10):t,"ios"===e?a=!0:"android"===e&&(s=!0),o=null}(p[1],parseInt(p[2],10)),window.navigator.userAgent.match(/Firefox\//)&&navigator.userAgent.match(/Seamonkey\//);let f,_=null;function w(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return null!==_?_:_=!(l()&&m()&&g()>=15)&&!!navigator.userAgent&&(/Instagram/.test(navigator.userAgent)?!y(e)&&{name:"ig"}:/FBIOS|MessengerForiOS/.test(navigator.userAgent)?{name:"fb"}:/FB4A|FBAV|FBSV|FB_IAB/.test(navigator.userAgent)?{name:"fb",deniesIframeInitiatedRedirect:!0}:l()&&/LinkedInApp/.test(navigator.userAgent)?{name:"linkedin"}:!!/Snapchat/.test(navigator.userAgent)&&{name:"snapchat",deniesIframeInitiatedRedirect:!0})}function v(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement}function b(){const e=v();if(e&&e===f){if(document.exitFullscreen)return document.exitFullscreen();if(document.webkitExitFullscreen)return document.webkitExitFullscreen();if(document.mozCancelFullScreen)return document.mozCancelFullScreen();if(document.msExitFullscreen)return document.msExitFullscreen()}}function E(){const e=v();return!!e&&e===f}function P(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)e[n]=i[n]}return e}var S=function e(t,i){function n(e,n,r){if("undefined"!=typeof document){"number"==typeof(r=P({},i,r)).expires&&(r.expires=new Date(Date.now()+864e5*r.expires)),r.expires&&(r.expires=r.expires.toUTCString()),e=encodeURIComponent(e).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var s="";for(var o in r)r[o]&&(s+="; "+o,!0!==r[o]&&(s+="="+r[o].split(";")[0]));return document.cookie=e+"="+t.write(n,e)+s}}return Object.create({set:n,get:function(e){if("undefined"!=typeof document&&(!arguments.length||e)){for(var i=document.cookie?document.cookie.split("; "):[],n={},r=0;r<i.length;r++){var s=i[r].split("="),o=s.slice(1).join("=");try{var a=decodeURIComponent(s[0]);if(n[a]=t.read(o,a),e===a)break}catch(e){}}return e?n[e]:n}},remove:function(e,t){n(e,"",P({},t,{expires:-1}))},withAttributes:function(t){return e(this.converter,P({},this.attributes,t))},withConverter:function(t){return e(P({},this.converter,t),this.attributes)}},{attributes:{value:Object.freeze(i)},converter:{value:Object.freeze(t)}})}({read:function(e){return'"'===e[0]&&(e=e.slice(1,-1)),e.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(e){return encodeURIComponent(e).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}},{path:"/"});const T=e=>S.get(e),A=(e,t,i)=>{try{S.set(e,t,i)}catch(e){}},I={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let L;const C=new Uint8Array(16);function O(){if(!L&&(L="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!L))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return L(C)}const M=[];for(let e=0;e<256;++e)M.push((e+256).toString(16).slice(1));const R=function(e,t,i){if(I.randomUUID&&!t&&!e)return I.randomUUID();const n=(e=e||{}).random||(e.rng||O)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){i=i||0;for(let e=0;e<16;++e)t[i+e]=n[e];return t}return function(e,t=0){return M[e[t+0]]+M[e[t+1]]+M[e[t+2]]+M[e[t+3]]+"-"+M[e[t+4]]+M[e[t+5]]+"-"+M[e[t+6]]+M[e[t+7]]+"-"+M[e[t+8]]+M[e[t+9]]+"-"+M[e[t+10]]+M[e[t+11]]+M[e[t+12]]+M[e[t+13]]+M[e[t+14]]+M[e[t+15]]}(n)};class x{constructor(){if(!this.constructor.model)throw new Error("Cannot generate a schema without a schema model");this._schema={},this._decorators={},this._autoAddChainMethodsForSchema(this.constructor.model)}_autoAddChainMethodsForSchema(e){e&&Object.entries(e).forEach((e=>{let[t,i]=e;i&&i.prototype instanceof x?(this._schema[t]=new i,this[t]=e=>(e(this._schema[t]),this)):Array.isArray(i)&&i[0]&&i[0].prototype instanceof x?(this._schema[t]=[],this[t]=e=>(this._schema[t]=e((()=>new i[0])),this)):(this._schema[t]=i||null,this[t]=e=>(null!=e&&(this._schema[t]=e),this))}))}_toObject(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this._parent=e,Object.entries(this._schema).reduce(((e,t)=>{let[i,n]=t;return n&&n.prototype instanceof k&&(n=new n),n instanceof k?e[i]=n.get(this,i):n instanceof x?e[i]=n._toObject(this):Array.isArray(n)&&n[0]instanceof x?e[i]=n.map((e=>e._toObject(this))):e[i]=n,e}),{...this._decorators})}decorate(e,t){if(this[e])throw new Error(`Cannot add decorator ${e} to ${this.constructor.name} as it already exists as a property`);return this._decorators[e]=t,this}toObject(){return this._toObject()}}class k{get(){throw new Error("Cannot use AbstractSchemaValue as value directly")}}class N extends k{constructor(e,t){super(),this._validate(e,t),this.parentClass=e,this.propertyName=t}get maxLevelOfTraversion(){return 15}_validate(e,t){if(!e||!t)throw new Error('Cannot instantiate InheritedValue without specifying "parentClass" and "propertyName" - have you looked at the static "InheritedValue.from()" method?');if(!(e.prototype instanceof x))throw new Error("Cannot inherit values from classes not derived from SchemaModel");if(!e.model.hasOwnProperty(t))throw new Error(`Cannot inherit value "${t}" as it does not exist on parent "${e.name}"`)}get(e,t){let i=e,n=0;for(;!(i instanceof this.parentClass)&&n<this.maxLevelOfTraversion;)i=i._parent,n++;if(!(i instanceof this.parentClass))throw new Error(`Inherting value "${this.propertyName}" failed as parent "${(new this.parentClass).constructor.name}" does not exist`);return i._schema[this.propertyName]?i._schema[this.propertyName]:(new D).get(e,t)}static from(e,t){try{return new N(e,t)}catch(e){return console.error(`Falling back to RequiredValue because of error: ${e.message}`),D}}}class D extends k{get(e,t){throw new Error(`Schema "${e.constructor.name}" missing required value "${t}"`)}}class B{constructor(e){if(!this._schemaVersions[e])throw new Error(`Trying to create a product of unsupported version ${e}`);this._version=e}get _schemaVersions(){return{3:U}}_createProduct(e){return new(0,this._schemaVersions[e])}get(){return this._product||(this._product=this._createProduct(this._version),this._product.decorate("_schemaVersion",this._version)),this._product}getWithId(e){return this.get().decorate("_id",e)}}class U extends x{static get model(){return{currency:D,locale:D,product:F,vendor:D}}inheritFromPlaceholder(){return this.product((e=>e.name("").sku(""))).decorate("_fromTemplate",!0)}publicUrl(e){return this.decorate("_publicUrl",e)}hidden(e){return this.decorate("_hidden",e)}}class F extends x{static get model(){return{brandName:"",defaultVariationIndex:0,description:"",name:D,sku:D,introduction:"",variations:[$]}}}class $ extends x{static get model(){return{attributes:H,imageUrls:[],name:D,sku:D,sizes:[z]}}}class H extends x{static get model(){return{colorName:N.from($,"name"),colorHexCode:null,colorImage:null}}}class z extends x{static get model(){return{name:D,inStock:!0,price:V,sku:D}}}class V extends x{static get model(){return{currency:N.from(U,"currency"),current:D,original:null,perUnit:null,unitAmount:null,unitDisplayName:null}}}const W=e=>{const t=new B(3).getWithId(e);return t.vendor("hydratable-product"),t};class G{transform(){throw new t("Cannot transform config using an abstract transformer!")}}class Y{constructor(i){if(!i)throw new t("Cannot create a BambuserLiveShoppingPlayerAPIEmbedInstanceAdapter\n        without an instance of embed.js (BambuserLiveShopping)");this._embedInstance=i,this.destroy=()=>this._embedInstance.destroy(),this.minimize=()=>this._embedInstance.minimize(),this.unminimize=()=>this._embedInstance.unminimize(),this.showCheckout=e=>this._embedInstance.showCheckout(e),this.updatePlayerCart=e=>this._embedInstance.updatePlayerCart(e),this.updateProducts=e=>this._embedInstance.updateProducts(e),this.hideUI=e=>this._embedInstance.hideUI(e),this.showUI=()=>this._embedInstance.showUI(),this.currentPlayerController=()=>this._embedInstance.currentPlayerController(),this.playerControllers=()=>this._embedInstance.playerControllers(),this.externalPlayerControllerEvent=e=>this._embedInstance.externalPlayerControllerEvent(e),this.play=()=>this._embedInstance.play(),this.pause=()=>this._embedInstance.pause(),this.showProductList=()=>this._embedInstance.showProductList(),this.hideProductList=()=>this._embedInstance.hideProductList(),this.getHighlightedProductsList=()=>this._embedInstance.playerApiCall(e.mL.PRODUCT_HIGHLIGHT_LIST,null,!0),this.seekToPercent=e=>this._embedInstance.seekToPercent(e),this.mute=()=>this._embedInstance.mute(),this.unmute=()=>this._embedInstance.unmute(),this.requestPictureInPicture=()=>this._embedInstance.playerApiCall(e.mL.REQUEST_PICTURE_IN_PICTURE,null,!0),this.exitPictureInPicture=()=>this._embedInstance.playerApiCall(e.mL.EXIT_PICTURE_IN_PICTURE,null,!0)}}const q=new RegExp(/^[a-z0-9]{15,30}$/,"i"),j=(e,t)=>X(e)&&X(t)?(Object.entries(t).forEach((t=>{let[i,n]=t;const r=e[i];Array.isArray(r)&&Array.isArray(n)?e[i]=r.concat(n):X(r)&&X(n)?e[i]=j({...r},n):e[i]=n})),e):t,X=e=>e&&"object"==typeof e&&!Array.isArray(e),K=()=>window.location.hash.match(/^#bamlvs-([a-zA-Z0-9]+)/),Z=new WeakMap;class Q{constructor(){this.setConfig({})}get configurableButtons(){return["checkout","dismiss","product"]}get configurableProperties(){return["buttons","currency","disableChatInput","enableFirstPartyCookies","experimental","locale","floatingPlayer","mockLive","includeQueryParams","playerContainerNode","shareBaseUrl","allowSoundControl","ui","miniPlayer","cookie","allowShareAutoplay","trimPriceTrailingZeros","minimizedPosition","miniplayerSize","checkoutOnCartClick","startMuted","shareTargets","_useExternalPlayerController","deeplink","disableClickOutsideBehavior","withGA","autoplay","themeId"]}get configurableFloatingPlayerProperties(){return["navigationMode"]}get configurableUIPlayerProperties(){return["hideActionBar","hideProductView","hideCartButton","hideCartView","hideChatOverlay","hideEmojiOverlay","hideProductList","hideShareButton","hideShareView","hideShare","hideAddToCalendar","hideAddToCalendarButton","showShareButtonInMobileActionBar"]}get configurableCookiePlayerProperties(){return["domain","activityCookieTTLDays"]}get defaultConfiguration(){const t={enableFirstPartyCookies:!0,includeQueryParams:["bamTag","shareLiveShopping","socialMediaLiveshopping"],buttons:{}};for(const i of this.configurableButtons)t.buttons[i]=e.Ze.AUTO;return t}get rawConfig(){return{...Z.get(this)}}getConfig(){return j(this.defaultConfiguration,this.rawConfig)}getConfigUsingTransformer(e){if(!(e instanceof G))throw new t("getConfigUsingTransformer() requires a valid subclass of AbstractBambuserLSConfigurationTransformer as first parameter");return e.transform(this)}setConfig(e){Z.set(this,e)}}const J=(e,t)=>Object.entries(e).filter((e=>{let[,i]=e;return t.includes(i)})).reduce(((e,t)=>{let[i,n]=t;return e[i]=n,e}),{}),ee=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info";if(!e)return;if(!["fatal","error","warning","log","info","debug","critical"].includes(t))return;const i={message:e,level:t,event_id:R().replace(/-/g,""),platform:"javascript",timestamp:Date.now()/1e3,request:{url:window.location.href,headers:{"User-Agent":window.navigator.userAgent}}};window.fetch&&window.fetch("https://sentry.bambuser.com/api/10/store/?sentry_key=c49605370c354874b15fb74f834659cf&sentry_version=7",{method:"POST",body:JSON.stringify(i)})},te=new WeakMap,ie=e=>te.get(e),ne=e=>`Configuration property "${e}" must be an object`;class re{constructor(e){te.set(this,e)}get BUTTON(){return t=ie(this).publicButtonBehaviors,J(e.Ze,t);var t}get EVENT(){return t=ie(this).publicEvents,J(e.wh,t);var t}get FLOATING_PLAYER_NAVIGATION_MODE(){return t=ie(this).publicFloatingPlayerNavigationModes,J(e.FLOATING_PLAYER_NAVIGATION_MODES,t);var t}get MINIMIZED_POSITION(){return t=ie(this).publicMinimizedPositions,J(e.Ug,t);var t}get MINIPLAYER_SIZE(){return t=ie(this).publicMiniplayerSizes,J(e.Pr,t);var t}close(){ie(this).embedInstance.destroy()}minimize(){ie(this).embedInstance.minimize()}unminimize(){ie(this).embedInstance.unminimize()}configure(e){const{configurableProperties:i,configurableButtons:n,configurableFloatingPlayerProperties:r,configurableUIPlayerProperties:s,configurableCookiePlayerProperties:o}=ie(this).config;if(!X(e))throw new t("Invalid configuration provided");const a=(e,t)=>{const i={};return Object.keys(t).forEach((n=>{e.includes(n)&&(i[n]=t[n])})),i},l=a(i,e);if(l.hasOwnProperty("disableClickOutsideBehaviour")){l.disableClickOutsideBehavior=l.disableClickOutsideBehaviour,delete l.disableClickOutsideBehaviour;const e="Use of deprecated UK config name: disableClickOutsideBehaviour (in player.configure)";ee(e),console.warn(e,'Please use "disableClickOutsideBehavior" instead')}if(l.buttons){if(!X(l.buttons))throw new t(ne("buttons"));if(l.buttons=a(n,l.buttons),!((e,t)=>Object.values(t).every((t=>e.includes(t))))(ie(this).publicButtonBehaviors,l.buttons))throw new t('Configuration property "buttons" contain invalid button behaviors')}if(l.experimental&&!X(l.experimental))throw new t(ne("experimental"));if(l.ui){if(!X(l.ui))throw new t(ne("ui"));l.ui=a(s,l.ui)}if(l.miniPlayer){if(!X(l.miniPlayer))throw new t(ne("miniPlayer"));if(l.miniPlayer.edgeSpacing&&!X(l.miniPlayer.edgeSpacing))throw new t(ne("miniPlayer.edgeSpacing"))}if(l.cookie){if(!X(l.cookie))throw new t(ne("cookie"));l.cookie=a(o,l.cookie)}if(l.floatingPlayer){if(!X(l.floatingPlayer))throw new t(ne("floatingPlayer"));if(l.floatingPlayer=a(r,l.floatingPlayer),l.floatingPlayer.hasOwnProperty("navigationMode")&&!ie(this).publicFloatingPlayerNavigationModes.includes(l.floatingPlayer.navigationMode))throw new t('Floating player configuration property "navigationMode" has an invalid mode')}if(l.minimizedPosition){if("string"!=typeof l.minimizedPosition)throw new t('Configuration property "minimizedPosition" must be a string');if(!ie(this).publicMinimizedPositions.includes(l.minimizedPosition))throw new t('Floating player configuration property "minimizedPosition" has an invalid value')}if(l.shareTargets){if(!Array.isArray(l.shareTargets))throw new t('Configuration property "shareTargets" must be an array');l.shareTargets.forEach((e=>{if("string"!=typeof e)throw new t('Configuration property "shareTargets" must be an array of strings')}));try{l.shareTargets=JSON.stringify(l.shareTargets)}catch(e){throw new t('Configuration property "shareTargets" must be a valid JSON array')}}if(l.miniplayerSize){if("string"!=typeof l.miniplayerSize)throw new t('Configuration property "miniplayerSize" must be a string');if(!ie(this).publicMiniplayerSizes.includes(l.miniplayerSize))throw new t('Floating player configuration property "miniplayerSize" has an invalid value')}l.locale&&(l.locale=String(l.locale).replace("_","-"));const d=["buttons","ui","cookie","floatingPlayer"];Object.keys(l).forEach((e=>{d.includes(e)&&"object"==typeof l[e]&&null!==l[e]&&!Object.keys(l[e]).length&&delete l[e]}));const{logger:c}=ie(this).embedInstance._embedInstance;c&&c.log("configure()",l,ie(this)),ie(this).config.setConfig(l)}off(e,t){ie(this).off(e,t)}on(e,t){ie(this).on(e,t)}removeAllListeners(){for(const e in ie(this).eventSubscribers)delete ie(this).eventSubscribers[e]}showCheckout(e){if(!e)throw new t('showCheckout() requires "checkoutPageUrl" to be provided as first param');if("string"!=typeof e)throw new t('showCheckout() got an invalid "checkoutPageUrl"');if(!e.includes("http"))throw new t('showCheckout() please specify protocol "http://" or "https://" in "checkoutPageUrl"');ie(this).embedInstance.showCheckout(e)}updateCart(e){const{items:i}=e;if(!Array.isArray(i))throw new t("updateCart() requires cartData.items to be an array");i.length>0&&console.warn("updateCart() currently does not support inserting cart items.\n        You can only set an empty array ([]) for clearing the cart."),ie(this).embedInstance.updatePlayerCart({count:i.length,items:i})}updateProduct(e,i){const{currency:n,locale:r}=ie(this).config.getConfig();if(!e)throw new t("updateProduct() requires first param to be a valid product id");if("function"!=typeof i)throw new t("updateProduct() requires second param to be a function");const s=W(e);n&&s.currency(n),r&&s.locale(r);const o=i(s);if(!(o instanceof x))throw new t("updateProduct() must return a valid product");ie(this).embedInstance.updateProducts([o])}hideUI(e){ie(this).embedInstance.hideUI(e)}showUI(){ie(this).embedInstance.showUI()}play(){ie(this).embedInstance.play()}pause(){ie(this).embedInstance.pause()}showProductList(){return ie(this).embedInstance.showProductList()}hideProductList(){return ie(this).embedInstance.hideProductList()}getHighlightedProductsList(){return ie(this).embedInstance.getHighlightedProductsList()}seekToPercent(e){ie(this).embedInstance.seekToPercent(e)}mute(){ie(this).embedInstance.mute()}unmute(){ie(this).embedInstance.unmute()}requestPictureInPicture(){return ie(this).embedInstance.requestPictureInPicture()}exitPictureInPicture(){return ie(this).embedInstance.exitPictureInPicture()}get currentPlayerController(){return ie(this).embedInstance.currentPlayerController()}get playerControllers(){return ie(this).embedInstance.playerControllers()}externalPlayerControllerEvent(e){ie(this).embedInstance.externalPlayerControllerEvent(e)}}class se{constructor(e){let{configurationClass:i=Q}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!(e instanceof Y))throw new t("Cannot create a new BambuserLiveShoppingPlayerAPIDelegate without a binding adapter for embed.js\n        (BambuserLiveShoppingPlayerAPIEmbedInstanceAdapter)");if("function"!=typeof i||!(i.prototype instanceof Q||i.prototype.constructor.name===Q.prototype.constructor.name))throw new t("Cannot create a new BambuserLiveShoppingPlayerAPIDelegate without a valid configurationClass");this._config=new i,this._embedInstance=e,this._eventSubscribers={},this._mounted=!1,this._publicAPI=new re(this),this.resetPlayerControllers()}get config(){return this._config}get embedInstance(){return this._embedInstance}get eventSubscribers(){return this._eventSubscribers}get publicAPI(){return this._publicAPI}get publicButtonBehaviors(){return Object.values(e.Ze)}get publicEvents(){return[e.wh.ADD_TO_CART,e.wh.CHAT_MESSAGES,e.wh.CHECKOUT,e.wh.CLOSE,e.wh.HIDE_PRODUCT_LIST,e.wh.HIDE_CART,e.wh.HIDE_CHAT_OVERLAY,e.wh.NAVIGATE_BEHIND_TO,e.wh.PLAYER_SWIPE_DOWN,e.wh.PLAYER_SWIPE_LEFT,e.wh.PLAYER_SWIPE_RIGHT,e.wh.PLAYER_SWIPE_UP,e.wh.PROVIDE_PRODUCT_DATA,e.wh.LOAD,e.wh.READY,e.wh.SHOW_ADD_TO_CALENDAR,e.wh.SHOW_EMOJI_BATCH,e.wh.SHOW_PRODUCT_LIST,e.wh.SHOW_CART,e.wh.SHOW_CHAT_OVERLAY,e.wh.SHOW_PRODUCT_VIEW,e.wh.HIDE_PRODUCT_VIEW,e.wh.UPDATE_SHOW_STATUS,e.wh.UPDATE_PRODUCT_HIGHLIGHT,e.wh.SHOW_PRODUCT_LIST,e.wh.SHOW_SHARE,e.wh.SUBSCRIBE,e.wh.SYNC_CART_STATE,e.wh.UNSUBSCRIBE,e.wh.UPDATE_ITEM_IN_CART,e.wh.NOTIFY_URL_CHANGE,e.wh.EXTERNAL_PLAYER_CONTROLLER_NEW,e.wh.EXTERNAL_PLAYER_CONTROLLER_CHANGE,e.wh.EXTERNAL_PLAYER_CONTROLLER_PLAY,e.wh.EXTERNAL_PLAYER_CONTROLLER_PAUSE,e.wh.EXTERNAL_PLAYER_CONTROLLER_SEEK,e.wh.EXTERNAL_PLAYER_CONTROLLER_LOAD,e.wh.EXTERNAL_PLAYER_CONTROLLER_HIDE,e.wh.EXTERNAL_PLAYER_CONTROLLER_SHOW,e.wh.EXTERNAL_PLAYER_CONTROLLER_REMOVE,e.wh.EXTERNAL_PLAYER_CONTROLLER_MUTE,e.wh.PLAYBACK_STATUS,e.wh.PLAYER_CONTAINER_UPDATE,e.wh.ENTERED_PICTURE_IN_PICTURE,e.wh.EXITED_PICTURE_IN_PICTURE]}get publicFloatingPlayerNavigationModes(){return Object.values(e.FLOATING_PLAYER_NAVIGATION_MODES)}get publicMinimizedPositions(){return Object.values(e.Ug)}get publicMiniplayerSizes(){return Object.values(e.Pr)}getSupportedEvents(){return Object.keys(this.eventSubscribers)}isMounted(){return this._mounted}mount(e,i,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const{logger:s}=this.embedInstance._embedInstance;if(!this._mounted||r){if(!e)throw new t("Missing mountContext when mounting BambuserLiveShoppingPlayerAPIDelegate");if("function"!=typeof e[i])throw new t(`Couldnt find method "${i}" on provided mountContext`);s&&s.log("mount() API is mounting..."),this._mountContext=e,this._mountPoint=i;try{this._publicAPI.removeAllListeners(),this._mountContext[this._mountPoint](this._publicAPI,n),this._mounted=!0,s&&s.log("mount() API is now mounted")}catch(e){s&&s.error("mount() API mounting failed",e.message)}}else s&&s.log("mount() API already mounted")}pushEvent(e){let{data:t,callback:i}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.eventSubscribers[e];Array.isArray(n)&&n.forEach((n=>{try{n(t,i)}catch(t){const{logger:i}=this.embedInstance._embedInstance;i&&i.error(`Event handler for event "${e}" threw the exception`,t)}}))}currentPlayerController(){return this._allPlayerControllers[this._currentPlayerControllerId]}playerControllers(){return this._allPlayerControllers}setupNewPlayerController(e){this._allPlayerControllers[e]||(this._allPlayerControllers[e]={id:e})}changeCurrentPlayerController(e){this._currentPlayerControllerId=e}resetPlayerControllers(){this._currentPlayerControllerId=null,this._allPlayerControllers={}}off(e,i){if(!this.publicEvents.includes(e))throw new t(`Trying to unsubscribe to non existing event "${e}"`);if(!Array.isArray(this.eventSubscribers[e]))throw new t("Trying to unsubscribe to a an event without subscribers");const n=this.eventSubscribers[e].indexOf(i);this.eventSubscribers[e].splice(n,1)}on(e,i){if(!this.publicEvents.includes(e))throw new t(`Trying to subscribe to non existing event "${e}"`);Array.isArray(this.eventSubscribers[e])||(this.eventSubscribers[e]=[]),this.eventSubscribers[e].push(i),this._embedInstance?._embedInstance?._onPlayerApiEventHandlerAdded(e)}}const oe=["cartType","chatName","hasAcceptedTerms","playerUrl","sandboxAttributes","credentiallessIframes"];class ae extends G{constructor(e){if(super(),!(e instanceof se))throw new t("Cannot create a new BambuserLSLegacyConfigurationTransformer without providing a valid instance of         BambuserLiveShoppingPlayerAPIDelegate");this._delegate=e}transform(e){const t=this._delegate.publicAPI,i=e.getConfig(),n=this._delegate.getSupportedEvents(),r={enableFirstPartyCookies:i.enableFirstPartyCookies,cartType:"external",checkoutTarget:"new-window",currency:i.currency,disableChatInput:i.disableChatInput,locale:i.locale,withoutProductDetails:!0,includeQueryParams:i.includeQueryParams,playerContainerNode:i.playerContainerNode,shareBaseUrl:i.shareBaseUrl,allowSoundControl:i.allowSoundControl,allowShareAutoplay:i.allowShareAutoplay,minimizedPosition:i.minimizedPosition,miniplayerSize:i.miniplayerSize,...i.ui,cookie:i.cookie,trimPriceTrailingZeros:i.trimPriceTrailingZeros,checkoutOnCartClick:i.checkoutOnCartClick,startMuted:i.startMuted,shareTargets:i.shareTargets,_useExternalPlayerController:i._useExternalPlayerController,deeplink:i.deeplink,disableClickOutsideBehavior:i.disableClickOutsideBehavior,withGA:i.withGA,autoplay:i.autoplay,themeId:i.themeId,...i.experimental,...i.miniPlayer};if(Object.keys(i.experimental||{}).every((e=>oe.includes(e)))||console.warn("Usage of undocumented experimental property",i.experimental),[t.EVENT.ADD_TO_CART,t.EVENT.CHECKOUT,t.EVENT.PROVIDE_PRODUCT_DATA].every((e=>n.includes(e)))&&(r.withoutProductDetails=!1),i.buttons){const e=i.buttons.checkout;switch(e){case t.BUTTON.AUTO:case t.BUTTON.LINK:break;case t.BUTTON.MINIMIZE:r.checkoutTarget="current-window",r.withMinimizeSupport=!0;break;default:console.error(`"${e}" not yet supported as Checkout Button`)}const n=i.buttons.dismiss;switch(n){case t.BUTTON.AUTO:break;case t.BUTTON.CLOSE:r.withMinimizeSupport=!1;break;case t.BUTTON.MINIMIZE:r.withMinimizeSupport=!0;break;case t.BUTTON.NONE:r.hideCloseButton=!0;break;default:console.error(`"${n}" not yet supported as Close Button`)}const s=i.buttons.product;switch(s){case t.BUTTON.AUTO:break;case t.BUTTON.LINK:r.withoutProductDetails=!0,r.openProductsTarget="new-window";break;case t.BUTTON.MINIMIZE:r.withMinimizeSupport=!0,r.withoutProductDetails=!0;break;case t.BUTTON.INLINE:r.openProductsTarget="inline";break;case t.BUTTON.NONE:r.openProductsTarget="none";break;default:console.error(`"${s}" not yet supported as Product Click Behavior`)}if(i.floatingPlayer){const{navigationMode:e=null}=i.floatingPlayer;if(e)switch(e){case t.FLOATING_PLAYER_NAVIGATION_MODE.IFRAME:case t.FLOATING_PLAYER_NAVIGATION_MODE.MANUAL:r.surfBehindMode=e;break;case t.FLOATING_PLAYER_NAVIGATION_MODE.IFRAME_SRCDOC:r.surfBehindMode=e,console.warn(`Using floating player navigation mode "${e}" is experimental`);break;default:console.error(`Using floating player navigation mode "${e}" not supported`)}}}return r.locale&&(r.locale=String(r.locale).replace("_","-")),r}}class le{constructor(){let{debug:e,isDev:t,logPrefix:i}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._debug=e,this._isDev=t,this._logPrefix=i}log(){arguments.length&&(arguments[0]=`${this._logPrefix}${arguments[0]}`),this._debug&&console.log(...arguments)}logDev(){arguments.length&&(arguments[0]=`${this._logPrefix}${arguments[0]}`),this._isDev&&console.log(...arguments)}logProd(){arguments.length&&(arguments[0]=`${this._logPrefix}${arguments[0]}`),console.log(...arguments)}warnProd(){arguments.length&&(arguments[0]=`${this._logPrefix}${arguments[0]}`),console.warn(...arguments)}error(){arguments.length&&(arguments[0]=`${this._logPrefix}${arguments[0]}`),console.error(...arguments)}warnProdDeprecated(){arguments.length&&(arguments[0]=`${this._logPrefix} DEPRECATED: ${arguments[0]}`),console.warn(...arguments)}}async function de(e,t){const{surf:i}=await r.e(820).then(r.bind(r,218));i(e,t)}const ce={SMALL:{MOBILE:120,DESKTOP:180},LARGE:{MOBILE:150,DESKTOP:200}},he={SMALL:{MOBILE:.3,DESKTOP:.3},LARGE:{MOBILE:.38,DESKTOP:.4}},ue=e=>e.key?"Tab"===e.key:e.charCode&&9===e.charCode||e.keyCode&&9===e.keyCode;class pe{static get USING_KEYBOARD(){return"using-keyboard"}static addUsingKeyboardClass(){document.body.classList.add(this.USING_KEYBOARD)}static removeUsingKeyboardClass(){document.body.classList.remove(this.USING_KEYBOARD)}static addUsingKeyboardClassOnTabNavigation(e){ue(e)&&this.addUsingKeyboardClass()}static enableModeDetection(){document.body.addEventListener("mousedown",this.removeUsingKeyboardClass.bind(this),!0),document.body.addEventListener("keydown",this.addUsingKeyboardClassOnTabNavigation.bind(this),!0)}static disableModeDetection(){document.body.removeEventListener("mousedown",this.removeUsingKeyboardClass),document.body.removeEventListener("keydown",this.addUsingKeyboardClassOnTabNavigation)}}const me=(e,t)=>`Player ${e} config is ignored as ${t} is disabled for the organization`;let ge,ye=!1;function fe(){window.dataLayer.push(arguments)}function _e(e){return{...e,send_to:ge}}const we=new URLSearchParams(window.location.search);class ve{static isParamTrue(e){const t=we.get(e);return t&&!!t.match(/^(1|true)$/)}static isParamFalse(e){const t=we.get(e);return t&&!!t.match(/^(0|false)$/)}}const be=e=>{const{config:t,debug:i,isDesktop:n,isNonSupportedBrowser:r,logger:s,_trackingContext:o,_isAppDevEnv:a}=e,l=[`type=${t.type}`],d=function(e,t){let i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3?arguments[3]:void 0;t&&(void 0!==n&&(t=n),l.push(`${e}=${i?encodeURIComponent(t):t}`))},{isParamTrue:c,isParamFalse:h}=ve,u=n&&(t.allowSoundControl||c("allowSoundControl")),p=Ee(window.location.search,t.includeQueryParams),m=t.hasOwnProperty("withMinimizeSupport"),{trimPriceTrailingZeros:g,checkoutOnCartClick:y,disableClickOutsideBehavior:f}=t,_=!!t.videoId;t.playerVersion&&d("playerVersion",t.playerVersion),t.isDashboard&&d("isDashboard",t.isDashboard),d("allowFullscreen",t.allowFullscreen,!1),d("allowSoundControl",u),d("allowShareAutoplay",t.allowShareAutoplay,!1,1),d("cartType",t.cartType),d("chatName",t.chatName,!0),d("checkoutTarget",_?"new-window":t.checkoutTarget),d("currency",t.currency),d("debug",i,!0),d("disableChatInput",t.disableChatInput,!1),d("deferReactAppInit",t.deferReactAppInit||c("deferReactAppInit")),d("eventId",t.eventId||t.videoId),d("isVOD",_),d("hasAcceptedTerms",t.hasAcceptedTerms,!1,1),d("hideActionBar",t.hideActionBar),d("hideCartButton",t.hideCartButton),d("hideCartView",t.hideCartView),d("hideChatOverlay",t.hideChatOverlay),d("hideEmojiOverlay",t.hideEmojiOverlay),d("hideCloseButton",t.hideCloseButton,!1,1),d("hideProductList",t.hideProductList),d("hideProductView",t.hideProductView),d("hideShareButton",t.hideShareButton),d("hideShareView",t.hideShareView||t.hideShare),t.hideShare&&s.warnProdDeprecated("Player config 'hideShare' is deprecated. Please use 'hideShareView' instead"),d("hideAddToCalendar",t.hideAddToCalendar),d("hideAddToCalendarButton",t.hideAddToCalendarButton),d("locale",t.locale),d("merchantHref",window.location.href.replace(/\?.+/,""),!0),d("merchantQueryParams",p),d("mockLiveBambuser",t.mockLive,!0),d("openProductsTarget",t.openProductsTarget),d("playerContainerNode",t.playerContainerNode,!0),d("trimPriceTrailingZeros",g||c("trimPriceTrailingZeros")),d("shareBaseUrl",t.shareBaseUrl,!0),d("shareTargets",t.shareTargets,!0),d("showShareButtonInMobileActionBar",t.showShareButtonInMobileActionBar),d("sourceUrl",t.sourceUrl||window.location.href,!0),d("withMinimizeSupport",m,!1,t.withMinimizeSupport?1:0),d("withoutProductDetails",t.withoutProductDetails,!1,"1"),d("checkoutOnCartClick",y),d("startMuted",t.startMuted),d("withGA",t.withGA),d("withBaaSPlayerPreloading",t.withBaaSPlayerPreloading||c("withBaaSPlayerPreloading")),d("autoplay",!0,!1,t.autoplay),d("appDevEnv",a),d("hideProducts",t.hideProducts),d("distributionPageId",t.distributionPageId),d("distributionContainerId",t.distributionContainerId);let w=t.broadcastHash,v=t.timestamp;if(t.deeplink&&"string"==typeof t.deeplink){const e=t.deeplink.split("@");2===e.length&&e[0]&&e[1]&&(w=e[0],v=e[1])}d("br",w,!0),d("time",v,!0),d("disableClickOutsideBehavior",f),t.withClientSideProductData&&(s.warnProdDeprecated("Use of flag withClientSideProductData is deprecated, please use new product hydration"),l.push(`withClientSideProductData=${t.withClientSideProductData}`)),o&&(d("uid",o.userId),d("sid",o.sessionId)),t.themeId&&d("themeId",t.themeId),t.orgId&&d("orgId",t.orgId),t._useExternalPlayerController&&d("_useExternalPlayerController",t._useExternalPlayerController),c("autoLoadPreviousRegistrySnapshot")&&d("autoLoadPreviousRegistrySnapshot",!0),c("_useMockPlayerController")&&d("_useMockPlayerController",!0),c("useNewImageTransformer")&&d("useNewImageTransformer",!0),c("bypassThemeCache")&&d("bypassThemeCache",!0),h("withStatePreloading")||d("withStatePreloading",!0),h("withChatMessageBackend")||d("withChatMessageBackend",!0),h("withReactionsBackend")||d("withReactionsBackend",!0),h("withProductsBackend")||d("withProductsBackend",!0),h("allowChatBlur")||d("allowChatBlur",!0);let b=t.playerUrl;return b.startsWith("//")&&(b=`${window.location.protocol}${b}`),b.endsWith("/")||(b+="/"),r&&(b+="unsupported-browser.html"),l.length>0&&(b+=`?${l.join("&")}`),s.log("_getPlayerUrl() url",b,"config",t),b},Ee=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e)return"";const i=new URLSearchParams(e),n=new URLSearchParams;for(const e of t){const t=i.get(e);null!==t&&n.append(e,t)}return encodeURIComponent(n)};class Pe extends Q{get defaultConfiguration(){const t=super.defaultConfiguration;return{...t,enableFirstPartyCookies:!1,buttons:{...t.buttons,product:e.Ze.MINIMIZE,dismiss:e.Ze.MINIMIZE}}}}const Se="default",Te=new URLSearchParams(window.location.search);let Ae=1;const{MANUAL:Ie,IFRAME_SRCDOC:Le}=e.FLOATING_PLAYER_NAVIGATION_MODES,{NORTH:Ce,SOUTH:Oe,EAST:Me,WEST:Re,NORTH_EAST:xe,SOUTH_EAST:ke,SOUTH_WEST:Ne,NORTH_WEST:De}=e.ORIENTATION,Be=document.currentScript&&document.currentScript.src,Ue=["ZXN0ZWUtbGF1ZGVy","ZXN0ZWUtbGF1ZGVyLWdyZWVjZQ==","bWFj"];class Fe{constructor(t){this.customization=this._getCustomization(Be);const i=n().getParser(window.navigator.userAgent);let r,s,o,a,l;this.isDesktop="desktop"===i.getPlatformType(!0),this.isNonSupportedBrowser=i.satisfies({windows:{"internet explorer":"<=11"},mobile:{safari:"<11"}}),this.debug=Te.get("debug-prod"),this.logger=new le({logPrefix:`[EMBED${window.top===window?"-TOP":""}] `,debug:this.debug,isDev:!1}),this.setConfig(t,i),this.playerEventsToForward=e.Eq,this.instanceId=Ae++,this.landingPagePageTitle=document.title,this.surf={frame:null,container:null,containerId:null,skipNextBrowserHistoryEntry:!1},this.player={frame:null,container:null,containerId:null},this.timeline={isLive:!1,currentTime:0,currentBroadcastId:null,serverTimeAtCurrentPosition:0},this.playerSettings={preferNewTabCheckout:!0},this.video={videoOrientation:e.hT.VERTICAL},this.isDesktop?(r=.5,s=0,o=ce.SMALL.DESKTOP,a=40,l=25):(r=.5,s=0,o=ce.SMALL.MOBILE,a=15,l=20),this.miniPlayer={position:{x:0,y:0},requestedPosition:{x:0,y:0},snapHorizontalThresholdRatio:r,snapVerticalThresholdRatio:s,snapThresholdOff:2,minWidth:o,maxX:0,maxY:0},this.quickMove={enabled:false,orientation:"",targetedPosition:{},thresholdX:a,thresholdY:l,trustIndex:0,timeout:null,detectionCount:0},this.onMiniPlayerMouseEnterLeave=this.onMiniPlayerMouseEnterLeave.bind(this),this.onFirstElementKeyDown=this.onFirstElementKeyDown.bind(this),this.onLastElementKeyDown=this.onLastElementKeyDown.bind(this);const d=new Y(this);let c;Ue.includes(window.btoa(this.customization))&&(c=Pe),this.playerDelegate=new se(d,{configurationClass:c}),window.location.search.match(/(\?|&)bambuserAppDevEnv=1(&.*)?$/)&&(this._isAppDevEnv=!0),this.addListeners(),this._pendingRequestsToPlayer={}}_getCustomization(e){if(e){const{pathname:t,search:i}=new URL(e);return new URLSearchParams(i).get("customization")||(t.match(/\/([^\/]+)\/embed\.js/)||[])[1]||Se}return Se}setConfig(t,i){this.config=t||{},this.config.playerUrl=(this.config.playerUrl||"https://lcx-player.bambuser.com/default").split("#")[0],this.customization!==Se&&(this.config.playerUrl=this.config.playerUrl.replace(/default/,`${this.customization}`));try{const e=window.localStorage.getItem("bambuserPlayerBaseURLOverride");e.match(/^https?:\/\//)&&(this.config.playerUrl=e)}catch(e){}this.config.mockLive=Te.get("mockLiveBambuser"),this.config.timestamp=Te.get("time"),this.config.broadcastHash=Te.get("br");const n=this.isDesktop&&"iOS"!==i.getOSName();this.config.allowFullscreen=n?Te.get("allowFullscreen"):"0",this.config.playerVersion=this.playerVersion,this.config.isDashboard=this.isDashboard,this.config.allowShareAutoplay=this.isAutoplayAllowed(),this.config.withGA&&function(t){if(ge)return;ge="string"==typeof t?t:e.In.PROD;const i=document.createElement("script");i.async=!0,i.setAttribute("src",`https://www.googletagmanager.com/gtag/js?id=${ge}`),document.head.appendChild(i),window.dataLayer||(window.dataLayer=[])}(this.config.withGA)}addListeners(){window.addEventListener("bambuser-config",this.onConfigUpdate.bind(this),!1)}onConfigUpdate(e){let{detail:{edgeSpacing:t}={}}=e;ee("Embed was configured via window event"),t&&(t=t[this.deviceType],t&&(this.config.edgeSpacing={...this.config.edgeSpacing,...t},this.setMiniPlayerInitialPosition(),"function"==typeof this.__calculateMinimizedView&&this.__calculateMinimizedView(),this.snapToBorders()))}_noForwardCartEvents(){for(const t of e.K0){const e=this.playerEventsToForward.indexOf(t);this.playerEventsToForward.splice(e,1)}}async show(){if(this.logger.log("show()"),this.hasBeenShown)return this.logger.log("hasBeenShown"),this.__restoreMinimized&&this.__originalEventId&&this.loadShow(this.__originalEventId),!1;const{href:i,search:n}=window.location,r=window===window.top,o=n.indexOf("autoplayLiveShopping=")>-1,a=window.parent===window.top;if(!(r||this._isAppDevEnv&&(o||a))){const t=this._isAppDevEnv?window.parent:window.top;if(await new Promise((i=>{const n=Date.now(),r=this.config,s=!!r.node;delete r.node;const o=r=>{if(r.source!=t)return void this.logger.log("show() parentMessageHandler() exit",r&&r.data);let s=null;try{s=JSON.parse(r.data)}catch(e){this.logger.logProd("show() parentMessageHandler() error",e)}if((!s||s.eventName!==e.mL.ON_PROGRESS)&&this.logger.logDev("show() parentMessageHandler() Event from parent",s),s&&s.eventName&&s.eventName===e.hN.ACCEPTED_REQUEST_OPEN_SHOW&&s.data.requestId===n)return window.clearTimeout(a),window.removeEventListener("message",o),void i(!0);this.logger.log("show() parentMessageHandler() Unhandled message",r)};o.bind(this),window.addEventListener("message",o,!1);const a=window.setTimeout((()=>{window.removeEventListener("message",o),i(!1)}),1500),l=JSON.stringify({eventName:e.hN.REQUEST_OPEN_SHOW,data:{requestId:n,config:r,fromNode:s}});t.postMessage(l,"*")})))return void this.logger.log("handledByParent");const r=n.length>0?"&":"?";return t.location=`${i}${r}autoplayLiveShopping=${this.config.eventId}`}if(window.__currentBambuserLiveShoppingOverlayPlayer){this.logger.log("load/restore a show when surfing without iframe in minimized state");const e=this.config.eventId,t=window.__currentBambuserLiveShoppingOverlayPlayer,i=t.config.eventId!==e;i&&t.mountPlayerAPI(e,!0);const n=t.getProviderConfig();return this.config.allowShareAutoplay?!1===n.allowShareAutoplay&&(this.config.allowShareAutoplay=!1):!0===n.allowShareAutoplay&&console.warn(me("allowShareAutoplay","autoplayHandler")),t.config=Object.assign(n,this.config),t.loadShow(e,i)}this._emitEvent("load");const d=w({_isEmbedContext:!0});if(d&&this.config.eventId&&!Te.has("autoplayLiveShopping")){this.logger.log("history.pushState show()");const e=`${i}${document.location.search.length>0?"&":"?"}autoplayLiveShopping=${this.config.eventId}&bls_ubn=${encodeURIComponent(d.name)}`;try{return await new Promise(((t,i)=>async function(e,t){let{onRedirect:i=((e,t)=>{let{undesiredBrowser:i}=t;return document.location=e}),onFail:n=(()=>{}),onLog:r=((e,t)=>{})}=t;const o=w();if(!o)return;const a=e.split("//").slice(1).join("//");let d=0,c=[];l()&&m()&&(c=[...c,`googlechrome://${a}`,`firefox://open-url?url=${encodeURIComponent(e)}`]),function(){if(null===s){const e=navigator.userAgent||navigator.vendor||window.opera;s=/android/i.test(e)}return s}()&&(c=[...c,`intent://${a}#Intent;scheme=http;end`]);let h=-1;const u=()=>{h++,d++;const e=c[h];if(e){const t=e.split(":")[0];r("open_external_browser",{bls_ubn:o.name,bls_ubm:t}),i(e,{undesiredBrowser:o})}else g(),n(),r("open_external_browser_fallback",{bls_ubn:o.name,bls_ubm:"none",attempts:d})};let p=setInterval(u,l()?1e3:500);function g(){clearInterval(p),p=null,document.removeEventListener("visibilitychange",y)}function y(){document.hidden&&g()}document.addEventListener("visibilitychange",y),u()}(e,{onFail:()=>i(new Error("Failed to open in external browser"))})))}catch(e){this.logger.logProd("embed.js failed to open external browser",e)}window.history.pushState(null,null,e)}this.config.sourceUrl=i;const c=`livecommerce-${this.instanceId}-${(new Date).getTime()}`,h=this.surf.containerId||`livecommerce-surf-${this.instanceId}-${(new Date).getTime()}`,p=`livecommerce-bg-${this.instanceId}-${(new Date).getTime()}`;this.loader=document.createElement("div"),this.loader.classList.add("livecommerce-loader"),window.setTimeout((()=>this?.loader?.classList.add("fade-in")),1e3),this.loaderWrapper=document.createElement("div"),this.loaderWrapper.style.width="100%",this.loaderWrapper.style.height="100%",this.config.disableClickOutsideBehavior||this.loaderWrapper.addEventListener("click",this.destroy.bind(this));const y=this?.config?.containerNode||document.createElement("div");y.setAttribute("id",c),y.setAttribute("data-bambuser-liveshopping-player-id",c),y.setAttribute("role","dialog"),y.setAttribute("aria-modal","true"),y.setAttribute("aria-label","Live video shopping"),this.config.containerNode||(y.appendChild(this.loaderWrapper),y.appendChild(this.loader)),this.styleElem=document.createElement("style"),this.styleElem.setAttribute("type","text/css"),this.activePlayerStyleElem=document.createElement("style"),this.activePlayerStyleElem.setAttribute("type","text/css");const f=(()=>{const e=m(),t=g();return(l()||u())&&`\n    html {\n      width: 100${e&&t>=15?"vw":"%"} !important;\n      height: 100${e&&t>=15?"vh":"%"} !important;\n    }\n    body {\n      position: fixed !important;\n      min-width: 100% !important;\n      min-height: 100% !important;\n      max-width: 100% !important;\n      max-height: 100% !important;\n      margin: 0 !important;\n      padding: 0 !important;\n    }`})();let _=((e,t,i,n)=>`\n  #${e} {\n    --focus-color: #0375d8;\n    --focus-style: auto;\n    --focus-width: 2px;\n    --focus-outline: var(--focus-color) var(--focus-style) var(--focus-width);\n    background-color: rgba(0, 0, 0, 0.55);\n    -webkit-animation: ${e}-fadein 0.3s;\n    animation: ${e}-fadein 0.3s;\n    top: unset;\n    left: unset;\n    display: block;\n    max-width: none;\n    max-height: none;\n  }\n\n  #${e}.is-snapping {\n    transition: transform 200ms ease-out;\n  }\n\n  #${e} iframe,\n  #${t} iframe {\n    width: 100% !important;\n    height: 100% !important;\n    opacity: 0 !important;\n    border: 0 !important;\n    padding: 0 !important;\n    margin: 0 !important;\n    position: relative !important;\n    top: initial !important;\n    left: initial !important;\n    right: initial !important;\n    bottom: initial !important;\n    z-index: inherit !important;\n  }\n\n  #${e} iframe.ready {\n    -webkit-animation: ${e}-fadein 0.3s;\n    animation: ${e}-fadein 0.3s;\n    opacity: 1 !important;\n  }\n\n  #${e} .livecommerce-loader {\n    position: absolute;\n    top: 50%;\n    left: 50%;\n    transform: translate(-50%, -50%);\n    width: 52px;\n    height: 52px;\n    pointer-events: none;\n    margin: 0;\n    text-align: center;\n    opacity: 0;\n  }\n\n  #${e} .livecommerce-loader.fade-in {\n    transition: opacity 200ms;\n    opacity: 1;\n  }\n\n  #${e} .livecommerce-loader.hidden {\n    display: none;\n  }\n\n  #${e} .livecommerce-loader:before {\n    position: absolute;\n    content: '';\n    top: 0;\n    left: 0;\n    width: 52px;\n    height: 52px;\n    border-radius: 500rem;\n    border: 1.68px solid rgba(255,255,255,.15);\n  }\n\n  #${e} .livecommerce-loader:after {\n    position: absolute;\n    content: '';\n    top: 0;\n    left: 0;\n    width: 52px;\n    height: 52px;\n    -webkit-animation: ${e}-loader-spin .6s linear;\n    animation: ${e}-loader-spin .6s linear;\n    animation-iteration-count: infinite;\n    border-radius: 500rem;\n    border-color: #fff transparent transparent;\n    border-style: solid;\n    border-width: 1.68px;\n    box-shadow: 0 0 0 1px transparent\n  }\n\n  #${e} .livecommerce-restore-minimized,\n  #${e} .livecommerce-close-minimized {\n    position: absolute;\n    top: 0;\n    left: 0;\n    cursor: pointer;\n    transform: scale3d(1, 1, 1);\n    display: none;\n    opacity: 0;\n    z-index: 2147483647;\n    padding: ${this.isDesktop?"13px 10px 19px 11px":"9px 14px 23px 7px"};\n    transform-origin: 0 0;\n  }\n\n  #${e} .livecommerce-close-minimized {\n    left: auto;\n    top: 4px;\n    right: 4px;\n    padding: 0;\n    width: 40px;\n    height: 40px;\n    transform-origin: top right;\n    background: rgba(0, 0, 0, 0.16);\n    border-radius: 28px;\n    justify-content: center;\n    align-items: center;\n  }\n\n  #${e} .livecommerce-close-minimized.livecommerce-v2 {\n    width: 48px;\n    height: 48px;\n    top: 0;\n    right: unset;\n    bottom: unset;\n    left: 0;\n    background: transparent;\n    opacity: 1;\n    display: flex;\n  }\n\n  #${e} .livecommerce-close-minimized.livecommerce-v2 svg {\n    height: 24px;\n    width: 24px;\n  }\n\n  #${e} .livecommerce-close-minimized.livecommerce-v2::before {\n    content: ' ';\n    position: absolute;\n    display: block;\n    top: 8px;\n    left: 8px;\n    width: 32px;\n    height: 32px;\n    background: rgba(41, 41, 41, 0.6);\n    border-radius: 28px;\n    z-index: -1;\n  }\n\n  #${e} .livecommerce-restore-minimized:focus,\n  #${e} .livecommerce-close-minimized:focus {\n    outline: none;\n  }\n\n  .${pe.USING_KEYBOARD} #${e} .livecommerce-restore-minimized:focus,\n  .${pe.USING_KEYBOARD} #${e} .livecommerce-close-minimized:focus {\n    outline: var(--focus-outline);\n  }\n\n  #${e} .livecommerce-restore-minimized path,\n  #${e} .livecommerce-close-minimized path {\n    stroke-width: 2 !important;\n  }\n\n  #${e} .livecommerce-restore-minimized .theming-icon {\n    width: 44px;\n    margin: -13px -11px -15px -6px;\n    fill: #fff;\n  }\n\n  #${e} .livecommerce-close-minimized .theming-icon {\n    width: 29px;\n    margin: -6px;\n    fill: #fff;\n  }\n\n  @-webkit-keyframes ${e}-loader-spin {\n    from { transform: rotate(0deg); }\n    to { transform: rotate(360deg); }\n  }\n\n  @keyframes ${e}-loader-spin {\n    from { transform: rotate(0deg); }\n    to { transform: rotate(360deg); }\n  }\n\n  @-webkit-keyframes ${e}-fadein {\n    from { opacity: 0; }\n    to   { opacity: 1; }\n  }\n\n  @keyframes ${e}-fadein {\n    from { opacity: 0; }\n    to   { opacity: 1; }\n  }\n\n  #${t} {\n    position: fixed;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background-color: #fff;\n    -webkit-animation: ${e}-fadein 0.3s;\n    animation: ${e}-fadein 0.3s;\n    opacity: 1;\n  }\n\n  #${t} iframe {\n    opacity: 1 !important;\n  }\n\n  #${i} {\n    position: fixed;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    opacity: 1;\n    background-color: rgba(0, 0, 0, 0.55);\n    pointer-events: none;\n  }`)(c,h,p);if("inline"===this.config.type&&(_+=((e,t)=>`\n  #${e}.inline {\n    position: relative;\n    background-color: transparent;\n    height: ${this.config.height||"550px"};\n    overflow: hidden;\n  }\n\n  #${e}.inline iframe {\n    position: absolute;\n    top: 0;\n    left: 0;\n  }`)(c)),"textContent"in this.activePlayerStyleElem?this.activePlayerStyleElem.textContent=f:this.activePlayerStyleElem.styleSheet.cssText=f,document.head.appendChild(this.activePlayerStyleElem),"textContent"in this.styleElem?this.styleElem.textContent=_:this.styleElem.styleSheet.cssText=_,document.head.appendChild(this.styleElem),"inline"===this.config.type){if(!this.config.node)throw new t("A 'node' must be specified for the inline type!");y.classList.add("inline"),this.config.node.appendChild(y)}else y.style.position="fixed",y.style.bottom=0,y.style.right=0,y.style.width="100%",y.style.height="100%",y.style.overscrollBehavior="none",y.style.zIndex=2147483647,this.config.containerNode||("object"==typeof this.config.playerContainerNode&&this.config.playerContainerNode.tagName&&this.config.playerContainerNode||document.body).appendChild(y),this._disableParentScroll(),document.addEventListener("touchmove",this.__preventBodyScroll=this._preventBodyScroll.bind(this),{passive:!1}),(l()||u())&&(window.visualViewport?window.visualViewport.addEventListener("resize",this._viewportChangeHandler.bind(this)):window.addEventListener("scroll",(this.__pushPageScrollTopHandler=this._pushPageScrollTopHandler).bind(this)));return this.hasBeenShown=!0,this.__originalEventId=this.config.eventId,this.surf.containerId=h,this.backgroundContainerId=p,this.player.container=y,this.player.containerId=c,this.__cancelFullscreenListener=this.listenToPlayerFullscreenEvents(),"loading"!==document.readyState?this.loadPlayer():(this.loadPlayerBound=this.loadPlayer.bind(this),window.addEventListener("DOMContentLoaded",this.loadPlayerBound)),!0}_createPlayerFrame(){this.logger.log("_createPlayerFrame()");const e=document.createElement("iframe");return e.setAttribute("src",this._getPlayerUrl()),e.setAttribute("frameborder",0),e.setAttribute("allowTransparency",!0),e.setAttribute("allow","fullscreen; autoplay; web-share"),e.setAttribute("title","Live video shopping"),this.config.sandboxAttributes&&e.setAttribute("sandbox",this.config.sandboxAttributes),this.config.credentiallessIframes&&e.setAttribute("credentialless",!0),e}mountPlayerAPI(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i="onBambuserLiveShoppingReady";try{this.playerDelegate.mount(window,i,e,t)}catch(e){this.logger.warnProd(`No ${i} method was found on window. Using default values for player.`)}}loadPlayer(){const{eventId:t}=this.config;if((e=>e&&"string"==typeof e&&("MOCK"===e||q.test(e)))(t)||console.warn(`${t} does not seem to have a valid showId format`),this.logger.log("loadPlayer() eventId",t),window.addEventListener("message",this.__receiveMessage=this._receiveMessage.bind(this),!1),"function"==typeof this.loadPlayerBound&&(window.removeEventListener("DOMContentLoaded",this.loadPlayerBound),delete this.loadPlayerBound),this.mountPlayerAPI(t),this.applyProviderConfig(),this.config.checkoutOnCartClick){const t=e.mL.CHECKOUT.replace(e.hw,"");if(!this.playerDelegate.getSupportedEvents().includes(t)){let e="When the checkoutOnCartClick configuration attribute is set to true, ";e+="an event listener for player.EVENT.CHECKOUT must be registered.",console.warn(e)}}this.config.containerNode?this.player.frame=this.config.containerNode.getElementsByTagName("iframe")[0]:(this.player.frame=this._createPlayerFrame(),this.player.container.appendChild(this.player.frame),"overlay"===this.config.type&&(window.__currentBambuserLiveShoppingOverlayPlayer=this)),this._pauseOtherPlaybacks()}applyProviderConfig(){const t=this.getProviderConfig();var i;t._useExternalPlayerController&&(this.player.container.style.backgroundColor="transparent"),this.config.allowShareAutoplay?!1===t.allowShareAutoplay&&(this.config.allowShareAutoplay=!1):!0===t.allowShareAutoplay&&console.warn(me("allowShareAutoplay","autoplayHandler")),this.config=Object.assign(t,this.config),this.config.enableFirstPartyCookies&&(this._trackingContext={userId:T(e.sJ.USER_ID)||R(),sessionId:T(e.sJ.SESSION_ID)||R()},this.config.withGA&&(i=this._trackingContext.userId)&&!ye&&(ye=!0,fe("js",new Date),fe("config",ge,{user_id:i,cookie_prefix:e.yM}),fe("set","user_properties",_e({bamls_usid:i}))))}getProviderConfig(){const e=new ae(this.playerDelegate),t=this.playerDelegate.config.getConfigUsingTransformer(e);this.playerDelegate.isMounted()||(t.withoutProductDetails=!1);const{edgeSpacing:i={}}=t||{},n=this.isDesktop?16:8,{top:r=n,right:s=n,bottom:o=n,left:a=n}=i[this.deviceType]||{};return t.edgeSpacing={top:r,right:s,bottom:o,left:a},JSON.parse(JSON.stringify(t||{}))}_onPlayerApiEventHandlerAdded(e){this._playerEventHandlers=this._playerEventHandlers||[],this._playerEventHandlers.includes(e)||this._playerEventHandlers.push(e)}showPlayer(){if(this.logger.log("showPlayer()"),this.player.frame){document.contains(this.loaderWrapper)&&(this.loaderWrapper.parentNode.removeChild(this.loaderWrapper),this.loaderWrapper=null);const t=new URLSearchParams(window.location.search),i=t.get("bls_ubn");if(i){const n=t.get("bls_ubm");this._sendMessageToPlayer(e.mL.OPEN_EXTERNAL_BROWSER_SUCCESS,{bls_ubn:i,bls_ubm:n})}this.player.frame.classList.add("ready"),this.loader?.classList.add("hidden"),this.player.frame.setAttribute("data-test-id","iframePlayer"),this._sendMessageToPlayer(e.mL.EXTERNAL_EVENT_HANDLERS,{eventHandlers:this._playerEventHandlers}),this._emitEvent(e.wh.READY)}}syncCartState(){this._emitEvent(e.wh.SYNC_CART_STATE,(e=>{e&&0===e.count&&this.updatePlayerCart({count:0})}))}updatePlayerCart(t){let{count:i,items:n}=t;this._sendMessageToPlayer(e.mL.DO_SYNC_CART_STATE,{count:i,items:n})}moveMiniPlayer(){const{x:e,y:t}=this.miniPlayer.position;this.player.container.style.transform=`translate(${e}px, ${t}px)`}snapToBorders(){const{position:t,position:{x:i,y:n},snapLeftThreshold:r,snapTopThreshold:s,snapBottomThreshold:o,minX:a,minY:l,maxX:d,maxY:c,videoWidth:h,videoHeight:u}=this.miniPlayer;let p=!1;const{edgeSpacing:m}=this.config;switch(this.config.minimizedPosition){case e.Ug.TOP_LEFT:i<a+r?(t.x=a+m.left,p=!0):i>m.right-r&&(t.x=d-m.right-h,p=!0),n<l+s?(t.y=l+m.top,p=!0):n>c-o-u&&(t.y=c-u-m.bottom,p=!0);break;case e.Ug.TOP_RIGHT:i<a+r?(t.x=a+m.left,p=!0):i>m.right-r&&(t.x=d-m.right,p=!0),n<l+s?(t.y=l+m.top,p=!0):n>c-o&&(t.y=c-m.bottom,p=!0);break;case e.Ug.BOTTOM_LEFT:i<a+r?(t.x=a+m.left,p=!0):i>m.right-r&&(t.x=d-m.right-h,p=!0),n<l+s?(t.y=l+m.top,p=!0):n>m.bottom-o&&(t.y=c-m.bottom,p=!0);break;case e.Ug.BOTTOM_RIGHT:default:i<a+r?(t.x=a+m.left,p=!0):i>m.right-r&&(t.x=d-m.right,p=!0),n<l+s?(t.y=l+m.top,p=!0):n>m.bottom-o&&(t.y=c-m.bottom,p=!0)}p&&(this.player.container.classList.add("is-snapping"),window.setTimeout((()=>this.player.container.classList.remove("is-snapping")),500),this.moveMiniPlayer())}getQuickMoveOrientation(e,t){const i=Math.abs(e)>this.quickMove.thresholdX,n=Math.abs(t)>this.quickMove.thresholdY;return i?n?e<0?t>0?ke:xe:t>0?Ne:De:e<0?Me:Re:n?t>0?Oe:Ce:""}getQuickMoveTargetedPosition(e,t){let{x:i,y:n}=t;const{minX:r,minY:s,maxX:o,maxY:a}=this.miniPlayer,{edgeSpacing:l}=this.config;switch(e){case Ce:return i<r+l.left?{x:r+l.left,y:s+l.top}:i>o-l.right?{x:o-l.right,y:s+l.top}:{x:i,y:s+l.top};case Oe:return i<r+l.left?{x:r+l.left,y:a-l.bottom}:i>o-l.right?{x:o-l.right,y:a-l.bottom}:{x:i,y:a-l.bottom};case Me:return n<s+l.top?{x:r+l.left,y:s+l.top}:n>a-l.bottom?{x:r+l.left,y:a-l.bottom}:{x:r+l.left,y:n};case Re:return n<s+l.top?{x:o-l.right,y:s+l.top}:n>a-l.bottom?{x:o-l.right,y:a-l.bottom}:{x:o-l.right,y:n};case xe:return{x:r+l.left,y:s+l.top};case ke:return{x:r+l.left,y:a-l.bottom};case Ne:return{x:o-l.right,y:a-l.bottom};case De:return{x:o-l.right,y:s+l.top.top}}}quickMoveReset(){this.quickMove.orientation="",this.quickMove.trustIndex=0,this.quickMove.detectionCount=0}onMiniPlayerMouseEnterLeave(t){const i="mouseenter"===t.type;if(this.isDesktop&&this.miniPlayer.restoreButton&&(this.miniPlayer.restoreButton.style.display=i?"flex":"none",this.miniPlayer.restoreButton.style.opacity=i?1:0),2!==this.playerSettings.playerVersion){this.miniPlayer.closeButton.style.display=i?"flex":"none",this.miniPlayer.closeButton.style.opacity=i?1:0;const e=i?.1:.04;this.player.container.style.boxShadow=`0px 0px 1px rgba(0, 0, 0, ${e}), 0px 4px 8px rgba(0, 0, 0, ${e}), 0px 16px 24px rgba(0, 0, 0, ${e}), 0px 24px 32px rgba(0, 0, 0, ${e})`}this._sendMessageToPlayer(e.mL.SET_VIEWPORT_STATE,{mouseIsOver:i})}_onActionKeyDown(e,t){(e=>(e=>e.key?" "===e.key:e.charCode&&32===e.charCode||e.keyCode&&32===e.keyCode)(e)||(e=>e.key?"Enter"===e.key:e.charCode&&13===e.charCode||e.keyCode&&13===e.keyCode)(e))(e)&&"function"==typeof t&&t()}onFirstElementKeyDown(t){t.stopPropagation(),(e=>ue(e)&&e.shiftKey)(t)&&(this.onMiniPlayerMouseEnterLeave({type:"mouseleave"}),this._sendMessageToPlayer(e.mL.FOCUS_LAST_INSIDE_IFRAME),t.preventDefault())}onLastElementKeyDown(t){t.stopPropagation(),(e=>ue(e)&&!e.shiftKey)(t)&&(this.onMiniPlayerMouseEnterLeave({type:"mouseleave"}),this._sendMessageToPlayer(e.mL.FOCUS_FIRST_INSIDE_IFRAME),t.preventDefault())}setMiniPlayerInitialPosition(){const{edgeSpacing:t}=this.config;switch(this.config.minimizedPosition){case e.Ug.TOP_LEFT:this.player.container.style.top=`${t.top}px`,this.player.container.style.left=`${t.left}px`;break;case e.Ug.TOP_RIGHT:this.player.container.style.top=`${t.top}px`,this.player.container.style.right=`${t.right}px`;break;case e.Ug.BOTTOM_LEFT:this.player.container.style.bottom=`${t.bottom}px`,this.player.container.style.left=`${t.left}px`;break;case e.Ug.BOTTOM_RIGHT:default:this.player.container.style.bottom=`${t.bottom}px`,this.player.container.style.right=`${t.right}px`}}unminimize(){this.__restoreMinimized&&this.__restoreMinimized()}minimize(){var i=this;if(this.logger.log("minimize()"),!this.playerSettings.withMinimizeSupport)throw new t("Can't minimize player, not supported!");b(),this._trackOnInteraction("minimize"),this._sendMessageToPlayer(e.mL.SET_VIEWPORT_STATE,{minimized:!0});const{surfBehindMode:n}=this.config;if(n!==Ie)this.showSurf(),this._disableParentScroll();else{const e=document.querySelector("meta[name=viewport]");e&&-1===e.getAttribute("content").toLowerCase().indexOf("minimum-scale")&&e.setAttribute("content",`${e.getAttribute("content")}, minimum-scale=1`),this._restoreParentScroll()}this.player.container.setAttribute("aria-modal","false");const r=2===this.playerSettings.playerVersion;let s;r||this.isDesktop&&(s=document.createElement("div"),s.classList.add("livecommerce-restore-minimized"),s.setAttribute("tabindex","830"),s.setAttribute("role","button"),s.setAttribute("aria-label","Maximize live curation"),s.innerHTML=Fe.restoreIcon,s.addEventListener("keydown",this.onFirstElementKeyDown),this.player.container.appendChild(s),this.miniPlayer.restoreButton=s);const o=document.createElement("div");o.setAttribute("tabindex","830"),o.setAttribute("role","button"),o.setAttribute("aria-label","Close live curation"),o.classList.add("livecommerce-close-minimized"),o.innerHTML=Fe.closeIcon,r?(o.classList.add("livecommerce-v2"),o.innerHTML=Fe.closeIconV2):(o.innerHTML=Fe.closeIcon,this.isDesktop||(o.style.transition="opacity 300ms",o.addEventListener("keydown",this.onFirstElementKeyDown))),o.addEventListener("keydown",this.onLastElementKeyDown),this.player.container.appendChild(o),this.miniPlayer.closeButton=o,this.setMiniPlayerInitialPosition(),this.player.container.style.transformOrigin="bottom right",this.player.container.style.overflow="hidden",this.player.container.style.boxShadow="",this.isDesktop&&!this.backgroundContainer&&(this.backgroundContainer=document.createElement("div"),this.backgroundContainer.setAttribute("id",this.backgroundContainerId),this.backgroundContainer.style.zIndex=2147483647,this.backgroundContainer.style.transition="opacity 300ms",this.player.container.parentNode.insertBefore(this.backgroundContainer,this.player.container)),pe.enableModeDetection();const a=t=>{let n,s;const o=this.video.videoOrientation;let a,l;const d=this.isDesktop?"DESKTOP":"MOBILE";switch(this.config.miniplayerSize){case e.Pr.LARGE:a=ce.LARGE[d],l=he.LARGE[d];break;case e.Pr.SMALL:default:a=ce.SMALL[d],l=he.SMALL[d]}o===e.hT.VERTICAL?(n=Math.min(window.innerWidth*l,a),s=n*(16/9)):(s=Math.min(window.innerHeight*l,a),n=s*(16/9));const{snapHorizontalThresholdRatio:c,snapVerticalThresholdRatio:h}=this.miniPlayer,{edgeSpacing:u}=this.config,p=c?window.innerWidth*c-n/2:u.left,m=h?window.innerHeight*h-s/2:u.top,g=h?window.innerHeight*h-s/2:u.bottom;let y,f,_,w;switch(this.config.minimizedPosition){case e.Ug.TOP_LEFT:y=-u.left,f=-u.top,_=window.innerWidth-u.left,w=window.innerHeight-u.top;break;case e.Ug.TOP_RIGHT:y=-(window.innerWidth-n-u.right),f=-u.top,_=u.right,w=window.innerHeight-s-u.top;break;case e.Ug.BOTTOM_LEFT:y=-u.left,f=-(window.innerHeight-s-u.bottom),_=window.innerWidth-u.left,w=u.bottom;break;case e.Ug.BOTTOM_RIGHT:default:y=-(window.innerWidth-n-u.right),f=-(window.innerHeight-s-u.bottom),_=u.right,w=u.bottom}this.miniPlayer.snapLeftThreshold=p,this.miniPlayer.snapTopThreshold=m,this.miniPlayer.snapBottomThreshold=g,this.miniPlayer.minX=y,this.miniPlayer.minY=f,this.miniPlayer.maxX=_,this.miniPlayer.maxY=w,this.miniPlayer.videoWidth=n,this.miniPlayer.videoHeight=s;const v=function(){let t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const{position:r}=i.miniPlayer;switch(i.config.minimizedPosition){case e.Ug.TOP_LEFT:-r.x>u.left?r.x=y:Math.abs(r.x)+n+u.left>window.innerWidth&&(r.x=_-n),r.y<f?r.y=t?f:0:r.y+s+u.top>window.innerHeight&&(r.y=w-s);break;case e.Ug.TOP_RIGHT:Math.abs(r.x)+n+u.right>window.innerWidth?r.x=y:r.x>u.right&&(r.x=_),r.y<f?r.y=t?f:0:r.y>w&&(r.y=w);break;case e.Ug.BOTTOM_LEFT:-r.x>u.left?r.x=y:Math.abs(r.x)+n+u.left>window.innerWidth&&(r.x=_-n),Math.abs(r.y)+s+u.bottom>window.innerHeight?r.y=t?f:f+u.top:r.y>u.bottom&&(r.y=w);break;case e.Ug.BOTTOM_RIGHT:default:Math.abs(r.x)+n+u.right>window.innerWidth?r.x=y:r.x>u.right&&(r.x=_),s+u.bottom>window.innerHeight+r.y?r.y=t?f:f+u.top:r.y>u.bottom&&(r.y=w)}!t&&r.x<(_-y)/-2&&(r.x=y+u.left)};v(!1);const b=this.player.container.style;b.width=`${n}px`,b.height=`${s}px`,b.transform=`translate(${this.miniPlayer.position.x}px, ${this.miniPlayer.position.y}px)`,b.borderRadius="8px",!this.isDesktop&&!t||r||(b.boxShadow="0px 0px 1px rgba(0, 0, 0, 0.04), 0px 4px 8px rgba(0, 0, 0, 0.04), 0px 16px 24px rgba(0, 0, 0, 0.04), 0px 24px 32px rgba(0, 0, 0, 0.04)"),this._miniPlayerDragEnd=()=>{this.snapToBorders(),this.config.surfBehindMode===Ie&&this._restoreParentScroll()},this.__handleMoveMinimizedPlayer=e=>{let{dx:t,dy:i}=e;this.config.surfBehindMode===Ie&&this._disableParentScroll();const{requestedPosition:n,position:r}=this.miniPlayer;if(n.x!==r.x&&(n.x=r.x),n.y!==r.y&&(n.y=r.y),n.x+=t,n.y+=i,r.x=n.x,r.y=n.y,v(!0),this.moveMiniPlayer(),this.quickMove.enabled){if(this.quickMove.orientation){const e=Math.abs(t)+Math.abs(i);if(e<=this.quickMove.trustIndex)return;this.quickMove.trustIndex=e}if(this.quickMove.orientation=this.getQuickMoveOrientation(t,i),this.quickMove.orientation){this.logger.log("Quick move detected",t,i),this.quickMove.trustIndex=Math.abs(t)+Math.abs(i),this.quickMove.detectionCount++,this.quickMove.targetedPosition=this.getQuickMoveTargetedPosition(this.quickMove.orientation,n);const e=()=>{if(this.quickMove.detectionCount<3)return this.logger.log("Quick move false positive detected"),void this.quickMoveReset();const{x:e,y:n}=this.quickMove.targetedPosition;this.logger.log("Quick move action",t,i),r.x=e,r.y=n,v(!0),this.moveMiniPlayer(),this.quickMoveReset()};e.bind(this),this.quickMove.timeout&&window.clearTimeout(this.quickMove.timeout),this.quickMove.timeout=window.setTimeout(e,50)}}}};this.__resetMinimized=()=>{this.logger.log("__resetMinimized()"),this.isDesktop||(this.player.container.style.transition="transform 300ms"),this.player.container.style.top="",this.player.container.style.left="",this.player.container.style.bottom=0,this.player.container.style.right=0,this.player.container.style.width="100%",this.player.container.style.height="100%",this.player.container.style.transform="",this.player.container.style.borderRadius="",this.player.container.style.boxShadow="",this.player.container.style.overflow="",this.player.container.setAttribute("aria-modal","true"),this.isDesktop&&(this.backgroundContainer.style.display="",this.backgroundContainer.style.opacity=1,this.miniPlayer.restoreButton&&this.player.container.removeChild(this.miniPlayer.restoreButton)),this.player.container.removeChild(this.miniPlayer.closeButton),this._disableParentScroll(),delete this.__handleMoveMinimizedPlayer,window.removeEventListener("resize",this.__calculateMinimizedView),this.isDesktop&&(this.player.container.removeEventListener("mouseenter",this.onMiniPlayerMouseEnterLeave),this.player.container.removeEventListener("mouseleave",this.onMiniPlayerMouseEnterLeave)),delete this.__calculateMinimizedView,delete this.__resetMinimized,delete this.__restoreMinimized,delete this.__closeMinimized};const l=this.__resetMinimized;this.__restoreMinimized=()=>{this.logger.log("__restoreMinimized()"),this._trackOnInteraction("restore"),pe.disableModeDetection(),this._sendMessageToPlayer(e.mL.SET_VIEWPORT_STATE,{minimized:!1,mouseIsOver:!1}),this.syncCartState(),l(),this.surf.frame||this.activePlayerStyleElem.parentNode||document.head.appendChild(this.activePlayerStyleElem),this._pauseOtherPlaybacks(),delete this.__restoreMinimized},this.isDesktop&&this.miniPlayer.restoreButton&&(this.miniPlayer.restoreButton.addEventListener("click",this.__restoreMinimized.bind(this)),this.miniPlayer.restoreButton.addEventListener("keydown",(e=>this._onActionKeyDown(e,this.__restoreMinimized)))),this.__closeMinimized=()=>{this._trackOnInteraction("close",{actionOrigin:"miniplayer"}),this.__windowUnloadHandler&&(window.removeEventListener("unload",this.__windowUnloadHandler),delete this.__windowUnloadHandler),window.removeEventListener("resize",this.__calculateMinimizedView),this._emitEvent(e.wh.CLOSE),this.destroy()},this.miniPlayer.closeButton.addEventListener("click",this.__closeMinimized.bind(this)),this.miniPlayer.closeButton.addEventListener("keydown",(e=>this._onActionKeyDown(e,this.__closeMinimized)));const d="ontouchstart"in window||window.navigator.msMaxTouchPoints;window.setTimeout((()=>{this.isDesktop&&!d?(this.player.container.addEventListener("mouseenter",this.onMiniPlayerMouseEnterLeave),this.player.container.addEventListener("mouseleave",this.onMiniPlayerMouseEnterLeave)):(this.miniPlayer.closeButton.style.display="flex",this.miniPlayer.closeButton.style.opacity=1),this.player.container.style.transition="",a(!0)}),300),this.__calculateMinimizedView=a.bind(this),window.addEventListener("resize",this.__calculateMinimizedView),this.isDesktop?window.setTimeout((()=>{this.backgroundContainer.style.opacity=0,this.player.container.style.backgroundColor="transparent"}),0):this.player.container.style.transition="transform 300ms, border-radius 300ms",this.__calculateMinimizedView(),!this.surf.frame&&this.activePlayerStyleElem.parentNode&&this.activePlayerStyleElem.parentNode.removeChild(this.activePlayerStyleElem)}async enterPlayerFullscreen(){if(this.player.container)try{await async function(e){let t;if(e.requestFullscreen?t=e.requestFullscreen():e.webkitRequestFullscreen?t=e.webkitRequestFullscreen():e.mozRequestFullScreen?t=e.mozRequestFullScreen():e.msRequestFullscreen&&(t=e.msRequestFullscreen()),t)try{await t,f=e}catch(e){throw new Error('Could not enter fullscreen. If using an iframe, ensure the allow="fullscreen" attribute is set.')}}(this.player.container)}catch(e){console.log(e)}}async exitPlayerFullscreen(){try{await b()}catch(e){console.log(e)}}listenToPlayerFullscreenEvents(){var t,i;if(this.player.container)return t=this.player.container,i=()=>{this._sendMessageToPlayer(e.mL.SET_VIEWPORT_STATE,{fullscreen:E()})},t.addEventListener("fullscreenchange",i),()=>t.removeEventListener("fullscreenchange",i)}surfTo(i){if(this.logger.log("surfTo(url)",i),!this.playerSettings.withMinimizeSupport)throw new t("Can't surf to url behind player, not supported!");const{surfBehindMode:n}=this.config;if(n===Ie)return void(i!==window.location.href&&(this._emitEvent(e.wh.NAVIGATE_BEHIND_TO,{url:i}),this._emitEvent("surf-behind-to",{url:i})));const r=this.getSurfFrame();n===Le?de(r,{url:i}):r.setAttribute("src",i),this._emitEvent(e.wh.NOTIFY_URL_CHANGE,{url:i}),this._pauseOtherPlaybacks()}showSurf(){this.logger.log("showSurf()"),this.surf.container.style.visibility="visible",this.surf.container.style.pointerEvents="auto",this._disableParentScroll(),this.isDesktop&&(document.documentElement.style.overflow="hidden");const e=`body > *:not(#${this.surf.containerId}):not(#${this.player.containerId}):not(#${this.backgroundContainerId})`,t=document.querySelectorAll(e),i=(e=>{if(e?.parentNode&&e!==document.body&&document.body.contains(e)){for(;e.parentNode!==document.body;)e=e.parentNode;return e}})(this.config.playerContainerNode);for(const e of t){if(e===i)continue;const t=window.getComputedStyle&&window.getComputedStyle(e);t&&"none"===t.display||"none"===e.style.display||(e.setAttribute("data-surf-behind-hidden","1"),e.style.display="none")}}hideSurf(){this.logger.log("hideSurf()"),this.surf.container.style.visibility="hidden",this.surf.container.style.pointerEvents="none",this._restoreParentScroll(),this.isDesktop&&(document.documentElement.style.overflow="");const e=document.querySelectorAll("[data-surf-behind-hidden]");for(const t of e)t.removeAttribute("data-surf-behind-hidden"),t.style.display=""}onSurfLoad(){let e;try{const{frame:t,skipNextBrowserHistoryEntry:i}=this.surf,n=t.contentWindow;e=t.contentDocument||t.contentWindow.document;const{surfBehindMode:r}=this.config,s=n.location.href,o="about:srcdoc"===s&&e.baseURI?e.baseURI:s;this.logger.log("onSurfLoad() config.surfBehindMode",r,"surfHref",s,"surfDocument.baseURI",e.baseURI,"skipNextBrowserHistoryEntry",i,"url",o),r===Ie||i||"about:blank"===o||"about:srcdoc"===o?this.logger.log("NO history.replaceState surfBehindMode",r,"url",o):(document.title=e.title,r===Le?(window.history.pushState({bambuserLiveShopping:!0},e.title,o),this.logger.log("history.pushState surfBehindMode",r,"url",o)):(window.history.replaceState({bambuserLiveShopping:!0},e.title,o),this.logger.log("history.replaceState surfBehindMode",r,"url",o)))}catch(e){console.warn("Unable to sync browser url",e.message)}if(this.surf.skipNextBrowserHistoryEntry=!1,l()||u())try{e?.body.style.position||(e.body.style.position="initial")}catch(e){}}onPopstate(e){this.logger.log("popstate(event) event.state",e.state,"surfBehindMode",this.config.surfBehindMode,"state.bambuserLiveShopping",e.state&&e.state.bambuserLiveShopping),e.state&&e.state.bambuserLiveShopping?(this.showSurf(),this.config.surfBehindMode===Le&&(this.surf.skipNextBrowserHistoryEntry=!0,de(this.getSurfFrame(),window.location.href))):(document.title=this.landingPagePageTitle,this.hideSurf())}initializeSurf(){this.logger.log("initializeSurf()"),window.addEventListener("popstate",this.onPopstate.bind(this)),window.addEventListener("message",this.__receiveSurfFrameMessage=this._receiveSurfFrameMessage.bind(this),!1);const e=document.createElement("iframe");e.style.width="100%",e.style.height="100%",e.setAttribute("frameborder","0"),e.setAttribute("title","Surf behind live video shopping"),this.config.sandboxAttributes&&e.setAttribute("sandbox",this.config.sandboxAttributes),this.config.credentiallessIframes&&e.setAttribute("credentialless",!0),e.onload=this.onSurfLoad.bind(this),this.surf.frame=e;const t=document.createElement("div");t.style.visibility="hidden",t.style.pointerEvents="none",t.style.position="fixed",t.style.zIndex=2147483647,t.style.top=0,t.style.left=0,t.style.bottom=0,t.style.right=0,t.style.width="100%",t.style.height="100%",t.style.overscrollBehavior="inherit",t.setAttribute("id",this.surf.containerId),t.appendChild(e),this.surf.container=t,"inline"===this.config.type?document.body.appendChild(t):this.player.container.parentNode.insertBefore(t,this.player.container)}showSurfTimeout(){this.logger.log("popstate timeout showSurf(true)"),this.showSurf()}getSurfFrame(){return this.logger.log("getSurfFrame()"),this.surf.frame||this.initializeSurf(),this.surf.frame}showCheckout(e){this.playerSettings.preferNewTabCheckout?(document.addEventListener("visibilitychange",(this.__onReturnToWindow=()=>{document.hidden||(document.removeEventListener("visibilitychange",this.__onReturnToWindow),delete this.__onReturnToWindow,this.syncCartState())}).bind(this)),window.open(e,"_blank")):(this.surfTo(e),this.minimize())}get shouldUpdateTrackingCookies(){return this.config.enableFirstPartyCookies&&this._trackingContext}get deviceType(){return this.isDesktop?"desktop":"mobile"}get playerVersion(){const e=Te.get("v2");return"1"===e||"true"===e?2:"0"===e||"false"===e?1:2===window.__playerVersion?2:this.playerSettings?.playerVersion?this.playerSettings.playerVersion:null}get isDashboard(){return 1===window.__isDashboard?1:null}updateProducts(t){const i=[];for(const e of t)if(e instanceof x)try{i.push(e.toObject())}catch(e){console.info(`Ignoring invalid product: ${e.message}`)}else i.push(e);if(this.debug){window._bambuserHydratedProductsDebugStorage||(window._bambuserHydratedProductsDebugStorage={});for(const e of i)window._bambuserHydratedProductsDebugStorage[e._id]=e}this._sendMessageToPlayer(e.mL.PROVIDE_PRODUCT_DATA,{products:i})}hideUI(t){this._sendMessageToPlayer(e.mL.HIDE_UI,{uiSections:t})}showUI(){this._sendMessageToPlayer(e.mL.SHOW_UI)}play(){this._sendMessageToPlayer(e.mL.PLAY)}pause(){this._sendMessageToPlayer(e.mL.PAUSE)}showProductList(){this._sendMessageToPlayer(e.mL.SHOW_PRODUCT_LIST)}hideProductList(){this._sendMessageToPlayer(e.mL.HIDE_PRODUCT_LIST)}playerApiCall(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise(((n,r)=>{if(!e)return r(new Error("eventName required"));if(i){const i=`response-${e}:${Date.now()}`;t||(t={}),t.responseId=i,this._pendingRequestsToPlayer[i]=(e,t)=>{t?r(t):n(e)}}else n(null);this._sendMessageToPlayer(e,t)}))}seekToPercent(t){this._sendMessageToPlayer(e.mL.SEEK_TO_PERCENT,{seekToPercentage:t})}mute(){this._sendMessageToPlayer(e.mL.MUTE)}unmute(){this._sendMessageToPlayer(e.mL.UNMUTE)}createProduct(e){return W(e)}destroy(){this.logger.log("destroy()"),this.__resetMinimized&&(this.__resetMinimized(!0),delete this.__resetMinimized),this.__restoreMinimized&&delete this.__restoreMinimized,this.__closeMinimized&&delete this.__closeMinimized,this.__calculateMinimizedView&&delete this.__calculateMinimizedView,this.__cancelFullscreenListener&&(this.__cancelFullscreenListener(),delete this.__cancelFullscreenListener),this._destroyHtmlNodes(),this.__receiveMessage&&(window.removeEventListener("message",this.__receiveMessage,!1),delete this.__receiveMessage),this.__preventBodyScroll&&(document.removeEventListener("touchmove",this.__preventBodyScroll,{passive:!1}),delete this.__preventBodyScroll,this._restoreParentScroll()),this.__pushPageScrollTopHandler&&(window.removeEventListener("scroll",this.__pushPageScrollTopHandler),delete this.__pushPageScrollTopHandler,this.__pushPageScrollTopTimeout&&(window.clearTimeout(this.__pushPageScrollTopTimeout),delete this.__pushPageScrollTopTimeout)),this._clearCookieRefreshInterval(),this._trackingContext?.showWasPlayed&&this._updateTrackingCookies(),window.__currentBambuserLiveShoppingOverlayPlayer===this&&delete window.__currentBambuserLiveShoppingOverlayPlayer,this.config._useExternalPlayerController&&this.playerDelegate.resetPlayerControllers();for(const[e,t]of Object.entries(this._pendingRequestsToPlayer))t(void 0,"The request is rejected due to the player being closed."),delete this._pendingRequestsToPlayer[e];this.hasBeenShown=!1}_getPlayerUrl(){return be(this)}_destroyHtmlNodes(){this.logger.log("_destroyHtmlNodes()"),this.player.container&&(document.contains(this.loaderWrapper)&&(this.loaderWrapper.parentNode.removeChild(this.loaderWrapper),this.loaderWrapper=null),this.config.containerNode||(this.player.container.parentNode.removeChild(this.player.container),this.player.container=null,this.player.frame=null,this.loader=null,delete this.player.containerId)),this.backgroundContainer&&(this.backgroundContainer.parentNode.removeChild(this.backgroundContainer),this.backgroundContainer=null,delete this.backgroundContainerId),this.activePlayerStyleElem&&!this.surf.container&&(this.activePlayerStyleElem.parentNode&&this.activePlayerStyleElem.parentNode.removeChild(this.activePlayerStyleElem),this.activePlayerStyleElem=null),this.styleElem&&!this.surf.container&&(this.styleElem.parentNode.removeChild(this.styleElem),this.styleElem=null)}_preventBodyScroll(e){this.logger.log("_preventBodyScroll(rawEvent)",e);const t=e||window.event;return!(!this.__restoreMinimized||this.surf.frame)||t.touches.length>1||(t.preventDefault&&t.preventDefault(),!1)}_receiveMessage(t){const i=this.player.frame&&this.player.frame.contentWindow===t.source,n=t.source===window.parent&&this._isAppDevEnv;if(!i&&!n)return void this.logger.log("_receiveMessage() exit",t&&t.data);if(this._isAppDevEnv&&"object"==typeof t.data&&"string"==typeof t.data.eventType&&t.data.eventType.startsWith("bambuserAppDev:"))return void(t.source===window.parent?this.player.frame.contentWindow.postMessage(t.data,"*"):t.source===this.player.frame.contentWindow&&window.parent.postMessage(t.data,"*"));let r=null;try{r="object"==typeof t.data?t.data:JSON.parse(t.data)}catch(e){this.logger.logProd("_receiveMessage() error",e)}if((!r||r.eventName!==e.mL.ON_PROGRESS&&r.eventName!==e.mL.MINI_PLAYER_MOVE)&&this.logger.logDev("_receiveMessage() Event from player",r),r?.eventName===e.mL.MINIMIZED_ACTION_OVERLAY){const{withBackground:e}=r?.data||{},t=document.querySelector(".livecommerce-close-minimized");t&&(t.style.background=e?"none":"")}if(r&&r.eventName){let t=r.eventName;t.startsWith(e.hw)&&(t=t.substr(e.hw.length)),this.playerEventsToForward.includes(r.eventName)?this._emitEvent(t,r.data,this._sendPlayerEventResponse.bind(this,r)):this._handlePlayerEvent(r)}}_receiveSurfFrameMessage(t){let i=null;switch(typeof t.data){case"string":try{if(!t.data.includes(e.bZ))return void this.logger.log("_receiveSurfFrameMessage() skip non surf event message",t.data);i=JSON.parse(t.data)}catch(e){this.logger.log("_receiveSurfFrameMessage() error",e,"event",t.data)}break;case"object":i=t.data}this.surf.frame&&this.surf.frame.contentWindow===t.source?((!i||i.eventName!==e.mL.ON_PROGRESS)&&this.logger.logDev("_receiveSurfFrameMessage() Event from surf frame",i),i&&i.eventName&&this._handleSurfFrameEvent(i)):(!i||i.eventName!==e.mL.ON_PROGRESS&&i.eventName!==e.mL.TRACKING_POINT&&i.eventName!==e.mL.MINI_PLAYER_MOVE)&&this.logger.log("_receiveSurfFrameMessage() exit",t&&t.data)}_sendPlayerEventResponse(t,i){t.responseId?this._sendMessageToPlayer(e.mL.RESPONSE,{id:t.responseId,responseData:i}):this.logger.logProd(`Received response from embedding page for event '${t.eventName}', but no response was expected. Ignoring it!`)}_getTimelineForTracking(){const{currentBroadcastId:e,currentTime:t,isLive:i,serverTimeAtCurrentPosition:n}=this.timeline;return{broadcastId:e,isLive:i,relativeTime:t,serverTime:n}}_cleanPotentialPiiDataFromConfig(e){const t=JSON.parse(JSON.stringify(e));return delete t.chatName,t}_dispatchGlobalTrackingEvent(e){const t=new CustomEvent("bambuser-liveshop-tracking-point",{detail:e});window.dispatchEvent(t),this.config.withGA&&fe("event",e.event,_e(e.data))}_trackOnInteraction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._trackMetric("on-interaction",{...t,interactionType:e})}_trackMetric(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e)return void this.logger.logProd("Can't track metric without providing an eventName");const i={insertId:R(),orgId:this.playerSettings.orgId,showId:this.config.eventId,userId:this._trackingContext?.userId,sessionId:this._trackingContext?.sessionId,source:"embed",playerVersion:this.playerVersion||0,referrerUrl:window.location.origin,timeline:this._getTimelineForTracking(),...t},n={eventType:e,...i},r={event:e,data:{...i}};this.config.eventId&&this._trackMetricEmit(n),this._dispatchGlobalTrackingEvent(r)}_trackMetricEmit(e){const t=JSON.stringify(e),i=window.Request&&window.fetch,n=i&&"keepalive"in window.Request.prototype;e.clientTimestamp=(new Date).toISOString();let r=!1;if(!i&&window.navigator&&window.navigator.sendBeacon)try{r=window.navigator.sendBeacon("https://svc-prod-us.liveshopping.bambuser.com/collect/metric",t)}catch(e){}r||window.fetch("https://svc-prod-us.liveshopping.bambuser.com/collect/metric",{method:"POST",body:t,...n&&{keepalive:!0}}).catch((e=>{console.log(e)}))}_getUrlFromWindow(){const{origin:e,pathname:t,hash:i,search:n}=window.location;let r=new URLSearchParams(n);return r.delete("autoplayLiveShopping"),r=r.toString(),`${e}${t}${r.length>0?`?${r}`:""}${i}`}_handlePlayerEvent(t){let{eventName:i,data:n}=t;const{event:r,data:s}=n||{};if("function"==typeof this._pendingRequestsToPlayer[i])return this._pendingRequestsToPlayer[i](n),void(this._pendingRequestsToPlayer[i]=null);switch(i){case e.mL.SET_CLOSE_ICON:Fe.closeIcon=n.replace("<svg",'<svg class="theming-icon"'),Fe.closeIconV2=n;break;case e.mL.SET_RESTORE_ICON:Fe.restoreIcon=n.replace("<svg",'<svg class="theming-icon"');break;case e.mL.SET_VIDEO_STATE:Object.assign(this.video,n),this.__calculateMinimizedView&&this.__calculateMinimizedView();break;case e.mL.FOCUS_LEAVE:this.surf.frame.contentWindow.focus();break;case e.mL.FOCUS_FIRST_OUTSIDE_IFRAME:pe.addUsingKeyboardClass(),this.onMiniPlayerMouseEnterLeave({type:"mouseenter"}),window.setTimeout((()=>{const e=this.miniPlayer.restoreButton||this.miniPlayer.closeButton;e&&e.focus()}),0);break;case e.mL.FOCUS_LAST_OUTSIDE_IFRAME:pe.addUsingKeyboardClass(),this.onMiniPlayerMouseEnterLeave({type:"mouseenter"}),window.setTimeout((()=>{const e=this.miniPlayer.closeButton||this.miniPlayer.restoreButton;e&&e.focus()}),0);break;case e.mL.MINI_PLAYER_MOVE:"function"==typeof this.__handleMoveMinimizedPlayer&&this.__handleMoveMinimizedPlayer(n);break;case e.mL.MINI_PLAYER_DRAG_END:this._miniPlayerDragEnd();break;case e.mL.ON_PROGRESS:this.timeline=n;break;case e.mL.READY:Object.assign(this.playerSettings,n||{}),this._trackingContext||!this.playerSettings.userId&&!this.playerSettings.sessionId||(this._trackingContext={}),this.playerSettings.userId&&(this._trackingContext.userId=this.playerSettings.userId),this.playerSettings.sessionId&&(this._trackingContext.sessionId=this.playerSettings.sessionId),this.showPlayer(),this._trackMetric("on-configuration",{configuration:JSON.stringify(this._cleanPotentialPiiDataFromConfig(this.playerDelegate.config.rawConfig)),subscribedEvents:this.playerDelegate.getSupportedEvents(),...this.earlyPlayerAPIMessages&&{earlyPlayerAPIMessages:JSON.stringify(this.earlyPlayerAPIMessages)}}),this.playerSettings.withMinimizeSupport&&!this.surf.frame&&(this.logger.log("Pre-initializing surf"),this.surf.skipNextBrowserHistoryEntry=!0,this.surfTo(this._getUrlFromWindow())),this.__windowUnloadHandler=()=>this._trackOnInteraction("close",{actionOrigin:"window"}),window.addEventListener("unload",this.__windowUnloadHandler);break;case e.mL.CLOSE:this._emitEvent(e.wh.CLOSE),this.exitPlayerFullscreen(),this.__windowUnloadHandler&&(window.removeEventListener("unload",this.__windowUnloadHandler),delete this.__windowUnloadHandler),this.destroy();break;case e.mL.MINIMIZE:let t=(n||{}).url||null;if(t||this.surf.frame||this.config.surfBehindMode===Ie||(t=this._getUrlFromWindow(),this.surf.skipNextBrowserHistoryEntry=!0),t){if(!this.playerSettings.withMinimizeSupport)return window.open(t,"_blank");this.surfTo(t)}this.minimize();break;case e.mL.MINI_PLAYER_RESTORE:"function"==typeof this.__restoreMinimized&&this.__restoreMinimized();break;case e.mL.FULLSCREEN_ENTER:this.enterPlayerFullscreen();break;case e.mL.FULLSCREEN_EXIT:this.exitPlayerFullscreen();break;case e.mL.OPEN_EXTERNAL_BROWSER:n.url&&(window.location.href=n.url);break;case e.mL.TRACKING_POINT:if(!n)return;if(this._dispatchGlobalTrackingEvent(n),!this.shouldUpdateTrackingCookies)return;s&&(!this._trackingContext.showId&&s.showId&&(this._trackingContext.showId=s.showId),!this._trackingContext.orgId&&s.orgId&&(this._trackingContext.orgId=s.orgId),"on-play"===r&&(this._trackingContext.showWasPlayed=!0)),this._manageCookieRefreshInterval(r),this._updateTrackingCookies();break;case e.mL.TRACKING_SEND_EVENT:this.config.eventId&&this._trackMetricEmit({source:"embed",...s});break;case e.mL.RESET_BASE_PAGE_SCROLL:window.scrollTo(0,0);break;case e.mL.EXTERNAL_PLAYER_CONTROLLER_NEW:this.playerDelegate.setupNewPlayerController(n.id),this._emitEvent(e.wh.EXTERNAL_PLAYER_CONTROLLER_NEW,n);break;case e.mL.EXTERNAL_PLAYER_CONTROLLER_CHANGE:const o=n.id!==this.currentPlayerController();this.playerDelegate.changeCurrentPlayerController(n.id),o&&this._emitEvent(e.wh.EXTERNAL_PLAYER_CONTROLLER_CHANGE,n);break;case e.mL.EXTERNAL_PLAYER_CONTROLLER_PLAY:this._emitEvent(e.wh.EXTERNAL_PLAYER_CONTROLLER_PLAY,n);break;case e.mL.EXTERNAL_PLAYER_CONTROLLER_PAUSE:this._emitEvent(e.wh.EXTERNAL_PLAYER_CONTROLLER_PAUSE,n);break;case e.mL.EXTERNAL_PLAYER_CONTROLLER_SEEK:this._emitEvent(e.wh.EXTERNAL_PLAYER_CONTROLLER_SEEK,n);break;case e.mL.EXTERNAL_PLAYER_CONTROLLER_LOAD:this._emitEvent(e.wh.EXTERNAL_PLAYER_CONTROLLER_LOAD,n);break;case e.mL.EXTERNAL_PLAYER_CONTROLLER_HIDE:this._emitEvent(e.wh.EXTERNAL_PLAYER_CONTROLLER_HIDE,n);break;case e.mL.EXTERNAL_PLAYER_CONTROLLER_SHOW:this._emitEvent(e.wh.EXTERNAL_PLAYER_CONTROLLER_SHOW,n);break;case e.mL.EXTERNAL_PLAYER_CONTROLLER_REMOVE:this._emitEvent(e.wh.EXTERNAL_PLAYER_CONTROLLER_REMOVE,n);break;case e.mL.EXTERNAL_PLAYER_CONTROLLER_MUTE:this._emitEvent(e.wh.EXTERNAL_PLAYER_CONTROLLER_MUTE,n);break;default:this.logger.logDev("Received unhandled player event",i)}}loadShow(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.logger.log("loadShow(eventId)",e,"__restoreMinimized",!!this.__restoreMinimized,"eventId === config.eventId",e===this.config.eventId,"isNewShow",t),!t&&e===this.config.eventId&&this.__restoreMinimized)this.__restoreMinimized();else{this.config.eventId=e;const{frame:t}=this.player;if(t){t.classList.remove("ready"),this.loader.classList.remove("hidden"),this.__resetMinimized&&this.__resetMinimized();const e=t.parentNode;t.remove(),t.setAttribute("src",this._getPlayerUrl()),e.append(t)}else this.show()}}_pauseOtherPlaybacks(){const e=document.querySelectorAll("iframe");for(const t of e)t.src&&t.src.startsWith("https://www.youtube.com/embed")&&t.src.indexOf("enablejsapi=1")>=0&&t.contentWindow.postMessage(JSON.stringify({event:"command",func:"pauseVideo"}),"*");if(this.surf.frame)try{const e=this.surf.frame.contentWindow.document.createElement("script");e.innerHTML="\n        (function() {\n          let iframes = document.querySelectorAll('iframe');\n          for (let i = 0; i < iframes.length; i++) {\n            let iframe = iframes[i];\n            if (iframe.src && iframe.src.indexOf('https://www.youtube.com/embed') === 0) {\n              if (iframe.src.indexOf('enablejsapi=1') >= 0) {\n                iframe.contentWindow.postMessage(JSON.stringify({\n                  event: 'command',\n                  func: 'pauseVideo',\n                }), '*');\n              }\n            }\n          }\n          document.currentScript.parentNode.removeChild(document.currentScript);\n        })();",this.surf.frame.contentWindow.document.body.appendChild(e)}catch(e){}}_handleSurfFrameEvent(t){let{eventName:i,data:n}=t;switch(this.logger.log("_handleSurfFrameEvent(eventName, data)",{eventName:i,data:n}),i){case e.hN.REQUEST_OPEN_SHOW:const{config:t,requestId:r,fromNode:s}=n;if(!t||!r)return;const o=this.config.eventId,a=!!window.__currentBambuserLiveShoppingOverlayPlayer;if(this.logger.log("Request open show",{currentEventId:o,isBambuserLiveShoppingExposed:a}),!s&&t.eventId===o&&a)this.logger.log("Skip autoplay");else{const{eventId:e}=t,i=e!==o;i&&this.mountPlayerAPI(e,!0);const n=this.getProviderConfig();t.allowShareAutoplay?!1===n.allowShareAutoplay&&(t.allowShareAutoplay=!1):!0===n.allowShareAutoplay&&console.warn(me("allowShareAutoplay","autoplayHandler")),this.config=Object.assign(n,t),this.loadShow(e,i)}const l=JSON.stringify({eventName:e.hN.ACCEPTED_REQUEST_OPEN_SHOW,data:{requestId:r}});this.surf.frame.contentWindow.postMessage(l,"*");break;case e.hN.REQUEST_SURF_BEHIND_TO:if(this.config.surfBehindMode===Le){de(this.getSurfFrame(),n);break}default:this.logger.logDev("Received unhandled surf frame event",i)}}_sendMessageToPlayer(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this.player.frame)return this.earlyPlayerAPIMessages||(this.earlyPlayerAPIMessages=[]),void(this.earlyPlayerAPIMessages.includes(e)||this.earlyPlayerAPIMessages.push(e));this.logger.logDev("WILL EMIT TO PLAYER",e,t);const i={eventName:e};t&&(i.data=t);let n=this.config.playerUrl;n.startsWith("//")&&(n=window.location.protocol+n),this.player.frame.contentWindow.postMessage(JSON.stringify(i),n)}_emitEvent(e){const t={};for(var i=arguments.length,n=new Array(i>1?i-1:0),r=1;r<i;r++)n[r-1]=arguments[r];let[s=null,o=null]=n;"function"==typeof s&&(o=s,s=null),null!==s&&(t.data=s),"function"==typeof o&&(t.callback=o),this.playerDelegate.pushEvent(e,t),"function"==typeof window.BambuserLiveShoppingEventHandler&&window.BambuserLiveShoppingEventHandler({type:e,player:this,...t})}_updateTrackingCookies(){if(!this.shouldUpdateTrackingCookies)return;const{cookie:t={}}=this.config,{domain:i,activityCookieTTLDays:n}=t,r={expires:365,...i&&{domain:i}},{orgId:s,userId:o,showId:a,sessionId:l,showWasPlayed:d}=this._trackingContext;if(s&&A(e.sJ.CUSTOMER_ID,s,r),o&&A(e.sJ.USER_ID,o,r),l){const t=new Date((new Date).getTime()+18e5);A(e.sJ.SESSION_ID,l,{...r,expires:t})}if(a){const t={...r,expires:n>0?n:30};A(e.sJ.SHOW_ID,a,t),d&&A(e.sJ.LAST_INTERACTION_TIMESTAMP,(new Date).getTime(),t)}}_manageCookieRefreshInterval(e){this.shouldUpdateTrackingCookies&&(this._clearCookieRefreshInterval(),this._trackingContext.showWasPlayed&&"on-stop"!==e&&(this._cookieRefreshInterval=window.setInterval((()=>{this._updateTrackingCookies()}),6e4)))}_clearCookieRefreshInterval(){this._cookieRefreshInterval&&(window.clearInterval(this._cookieRefreshInterval),delete this._cookieRefreshInterval)}_viewportChangeHandler(t){const i=t.target.viewport?.height??t.target.height;this._sendMessageToPlayer(e.mL.CURRENT_BASEPAGE_VIEWPORT,{height:i})}_pushPageScrollTopHandler(){this.__pushPageScrollTopTimeout?window.clearTimeout(this.__pushPageScrollTopTimeout):this._sendMessageToPlayer(e.mL.CURRENT_BASEPAGE_SCROLLTOP,{scrollTop:window.scrollY}),this.__pushPageScrollTopTimeout=window.setTimeout((()=>{delete this.__pushPageScrollTopTimeout,this._sendMessageToPlayer(e.mL.CURRENT_BASEPAGE_SCROLLTOP,{scrollTop:window.scrollY})}),150)}_disableParentScroll(){document.documentElement.style.setProperty("overflow","hidden","important"),document.body.style.setProperty("overflow","hidden","important"),document.body.style.overscrollBehavior="none"}_restoreParentScroll(){document.documentElement.style.setProperty("overflow",""),document.body.style.setProperty("overflow",""),document.body.style.overscrollBehavior=""}currentPlayerController(){return this.playerDelegate.currentPlayerController()}playerControllers(){return this.playerDelegate.playerControllers()}externalPlayerControllerEvent(t){this._sendMessageToPlayer(e.mL.EXTERNAL_PLAYER_CONTROLLER_EVENTS,t)}isAutoplayAllowed(){return!Ue.includes(window.btoa(this.customization))}}Fe.restoreIcon="\n  <svg width='27' height='16' viewBox='0 0 27 16' fill='none' xmlns='http://www.w3.org/2000/svg' alt=''>\n    <path d='M2 15L14 2L26 15' stroke='white' stroke-width='2'></path>\n  </svg>",Fe.closeIcon="\n  <svg width='17' height='17' viewBox='0 0 17 17' fill='none' xmlns='http://www.w3.org/2000/svg' alt=''>\n    <path d='M16 16L1 1' stroke='white' stroke-width='2'></path>\n    <path d='M1 16L16 1' stroke='white' stroke-width='2'></path>\n  </svg>",Fe.closeIconV2='\n  <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">\n    <path fill-rule="evenodd" clip-rule="evenodd" d="M10.9393 12L4.96967 6.03033L6.03033 4.96967L12 10.9393L17.9697 4.96967L19.0303 6.03033L13.0607 12L19.0303 17.9697L17.9697 19.0303L12 13.0607L6.03033 19.0303L4.96967 17.9697L10.9393 12Z" fill="white"/>\n  </svg>';const $e=Fe;function He(e,t){"string"==typeof e?e={type:"overlay",eventId:e}:e.showId&&(e.eventId=e.showId,delete e.showId);const i=new window.BambuserLiveShopping(e);if(t&&!i.isAutoplayAllowed())return i;let n=!1;if(window.top){window.top===window&&(n=!0);try{window.top.location.href!==window.location.href&&(n=!0)}catch{}window.top===window||e._wasQueuedAtStartup||(n=!0)}return"overlay"===e.type&&e.node?e.node.addEventListener("click",(function(){i.show()})):null===e.node?console.log('Element from property "node" in Bambuser Live Shopping configuration could not be found'):n&&i.show(),i}function ze(e,t){He(e,t)}const Ve=e=>e.replace(/-([a-z])/g,(e=>e[1].toUpperCase())),We={products:{defaultValue:!0,isValidValue:e=>"on"===e||"off"===e||"true"===e||"false"===e,getValue:e=>"on"===e||"true"===e},title:{defaultValue:!0,isValidValue:e=>"on"===e||"off"===e||"true"===e||"false"===e,getValue:e=>"on"===e||"true"===e},overlayTextWrap:{defaultValue:!0,isValidValue:e=>"true"===e||"false"===e,getValue:e=>"on"===e||"true"===e},productCardMode:{defaultValue:"default",isValidValue:e=>["default","thumbnail","full"].includes(e),getValue:e=>e}},Ge=(e,t)=>{const i=Ve(e);if(i in We){if(We[i].isValidValue(t))return We[i].getValue(t);console.warn(`Invalid setting ${e} value: ${t}`)}else console.warn(`Invalid setting name: ${e}`)},Ye=e=>{if(350<e.length)return console.warn(`Settings string is too long: ${e.length} characters`),{};const t={},i=e.split(";");for(const e of i){const i=e.split(":").map((e=>e.trim()));if(2!==i.length){console.warn(`Invalid settings entry: ${i}`);continue}const[n,r]=i,s=Ge(n,r);void 0!==s&&(t[Ve(n)]=s)}return t},qe=e=>Object.entries(e).map((e=>{let[t,i]=e;return`${n=t,n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}:${i}`;var n})).join(";"),je=()=>Object.fromEntries(Object.entries(We).map((e=>{let[t,{defaultValue:i}]=e;return[t,i]}))),Xe={EXACT_SIZE:"exact-size",SAME_HEIGHT:"same-height",SAME_WIDTH:"same-width",FILL_PARENT:"fill-parent"},{setTimeout:Ke}=window,Ze=n().getParser(window.navigator.userAgent).satisfies({windows:{"internet explorer":"<=11"},mobile:{safari:"<11"}}),Qe=e=>{try{return new URL(e).toString()}catch(e){return null}};class Je extends window.HTMLElement{static observedAttributes=["event-id","video-id","autoplay","loop","poster","settings","show-products"];constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),this._id=Math.random().toString(36).substring(2,9),this._settings=je(),this._isProductViewShown=!1,this._isProductListShown=!1}connectedCallback(){Ze||this._hasConnected||(this._hasConnected=!0,this._updateSettingsFromAttributes(),this._setupDOM(),this._setup())}disconnectedCallback(){this._unloadResizeObserver?.()}attributeChangedCallback(e,t,i){if(this._hasConnected&&!this._isPlayerUILoaded){if("event-id"===e||"video-id"===e){if(!i)return void this._tearDown();i!==t&&(this._tearDown(),this._setupDOM(),this._setup())}"autoplay"===e&&(this.pause(),this._unloadDOMEventListeners?.(),this._setupDOMEventListeners()),"poster"===e&&this._updateStylesheet(),"settings"===e&&(this._updateSettingsFromAttributes(),this._updateOverlayDOM(),this._updateStylesheet())}}get _attr(){return{eventId:this.getAttribute("event-id"),videoId:this.getAttribute("video-id"),autoplay:this.getAttribute("autoplay")?.toLocaleLowerCase()||this.hasAttribute("autoplay")||!1,loop:this.getAttribute("loop")||this.hasAttribute("loop")||!1,standalone:"false"!==this.getAttribute("standalone"),poster:this.getAttribute("poster"),settings:this.getAttribute("settings"),showProducts:"false"!==this.getAttribute("show-products"),distributionPageId:this.getAttribute("distribution-page-id"),distributionContainerId:this.getAttribute("distribution-container-id"),playerFit:this.getAttribute("player-fit")||Xe.SAME_WIDTH}}_getPlayerUrl(){const{eventId:e,videoId:t,autoplay:i,standalone:n,distributionPageId:r,distributionContainerId:s}=this._attr,o=!0===i||i&&"hover"!==i&&"visible"!==i,a={...this.embedInstance.getProviderConfig(),...this.embedInstance.config,eventId:e,videoId:t,autoplay:o,type:"overlay",playerVersion:2,withBaaSPlayerPreloading:!0,deferReactAppInit:!0,withMinimizeSupport:!1,...!n&&{hideCloseButton:!0},...t&&{hideShareButton:!0,hideEmojiOverlay:!0},..."localhost:5080"===window.location.host&&{playerUrl:"http://local.bambuser.com/"},...r&&{distributionPageId:r},...s&&{distributionContainerId:s}};return`${be({config:a,logger:new le})}&${new URLSearchParams({widgetId:this._id,...!n&&{autoShowAllProductsOnHighlightedArea:!0}}).toString()}`}_updateSettingsFromAttributes(){const{settings:e}=this._attr;e&&(this._settings={...this._settings,...Ye(e)})}_updateStylesheet(){let e=this._videoWidth,t=this._videoHeight;(!isFinite(e)||!isFinite(t)||e<=0||t<=0)&&(e=null,t=null);const i=e&&t?e/t:.56565,{height:n,width:r}=this.getBoundingClientRect(),s=Math.max(8,Math.min(Math.round(n/35),20)),o="default"===this._settings.productCardMode&&(r<220||n<190),{playerFit:a,poster:l}=this._attr,{backgroundImage:d}=this?._event?.customPendingStyle||{},c=Qe(l)||Qe(d);this.styleSheet.textContent=(e=>{let t,i,{aspectRatio:n,fontSize:r,showOnlyThumbnails:s,poster:o,playerFit:a}=e;switch(a){case Xe.FILL_PARENT:i="100%",t="100%";break;case Xe.EXACT_SIZE:i="var(--bam-player-width, 250px)",t="var(--bam-player-height, 444px)";break;case Xe.SAME_HEIGHT:t="var(--bam-player-height, 444px)",i=`calc(${t} * ${n})`;break;default:i="var(--bam-player-width, 250px)",t=`calc(${i} / ${n})`}return`\n    :host {\n        display: block;\n        max-width: ${i};\n        position: relative;\n        aspect-ratio: ${n};\n        font-size: ${r}px;\n        overflow: hidden;\n        overscroll-behavior: none;\n        border-radius: var(--bam-player-corner-radius, 0px);\n        width: ${i};\n\n        --effective-height: ${t};\n        height: var(--effective-height);\n\n        --title-10-font-size: var(--bam-player-title-10-font-size, 22px);\n        --title-10-line-height: var(--bam-player-title-10-line-height, 1);\n\n        --title-20-font-size: var(--bam-player-title-20-font-size, 16px);\n        --title-20-line-height: var(--bam-player-title-20-line-height, 1);\n\n        --subtitle-20-font-size: var(--bam-player-subtitle-20-font-size, 14px);\n        --subtitle-20-line-height: var(--bam-player-subtitle-20-line-height, 1);\n    }\n    * {\n        user-select: none;\n    }\n    iframe {\n        width: 100%;\n        height: 100%;\n        transition: opacity 0.2s;\n        opacity: 1;\n    }\n    .wrapper {\n        position: absolute;\n        inset: 0px;\n        z-index: 1;\n    }\n    .placeholder {\n        height: 100%;\n        width: 100%;\n        ${o?`\n            background-image: url(${o});\n            background-size: cover;\n            background-position: center;\n            `:"background-color: var(--bam-player-placeholder-color, #EEE);"}\n    }\n    .overlay {\n        position: absolute;\n        inset: 0px;\n        display: flex;\n        align-items: end;\n        flex-direction: row;\n        z-index: 2;\n        pointer-events: none;\n    }\n    .overlay .products {\n        position: absolute;\n        bottom: 0;\n        display: flex;\n        padding: min(5%, 12px);\n        box-sizing: border-box;\n        width: 100%;\n        background-image: linear-gradient(rgba(51,51,51,0),rgba(0,0,0,.4));\n    }\n    .overlay .products .product {\n        max-width: max(33%, 410px);\n        display: flex;\n        flex-direction: row;\n        gap: min(0.8em, 8px);\n\n        border-radius: var(--bam-player-action-card-corner-radius, 4px);\n\n        padding: var(--bam-player-action-card-padding, min(0.6em, 6px));\n        background-color: white;\n        align-items: center;\n        overflow: hidden;\n    }\n    .overlay .products .product .product-info {\n        overflow: hidden;\n        padding-right: min(0.5em, 4px);\n        ${s?"display: none;":""}\n    }\n    .overlay .products .product .product-info .product-title {\n        font-family: var(--internal-font-family), Helvetica, Arial, Verdana, Tahoma, sans-serif;\n        font-size: var(--title-20-font-size);\n        line-height: var(--title-20-line-height);\n        font-weight: var(--bam-player-overlay-font-weight, bold);\n\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        position: relative;\n        padding-bottom: 6px;\n    }\n    .overlay .products .product .product-info .product-subtitle {\n        font-family: var(--internal-font-family), Helvetica, Arial, Verdana, Tahoma, sans-serif;\n        font-size: var(--subtitle-20-font-size);\n        line-height: var(--subtitle-20-line-height);\n        font-weight: light;\n\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        position: relative;\n    }\n    .overlay .products .product .product-info .product-price {\n        font-family: var(--internal-font-family), Helvetica, Arial, Verdana, Tahoma, sans-serif;\n        font-size: var(--subtitle-20-font-size);\n        line-height: var(--subtitle-20-line-height);\n        font-weight: var(--bam-player-overlay-font-weight, bold);\n\n        overflow: hidden;\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        position: relative;\n        padding-top: 6px;\n    }\n    .overlay .products .product .product-thumbnail-wrapper {\n        width: var(--bam-player-thumbnail-size, 68px);\n        height: var(--bam-player-thumbnail-size, 68px);\n        border-radius: var(--bam-player-action-card-corner-radius, 4px);\n    }\n    .overlay .products .product .product-thumbnail-wrapper img {\n        width: var(--bam-player-thumbnail-size, 68px);\n        height: var(--bam-player-thumbnail-size, 68px);\n        object-fit: contain;\n        border-radius: var(--bam-player-action-card-corner-radius, 4px);;\n    }\n    .overlay .products .product h2, .overlay .products .product h3 {\n        color: #FFF;\n        font-size: 16px;\n        margin: 0;\n    }\n    .overlay .basic-info {\n        color: #FFF;\n        font-family: var(--internal-font-family), Helvetica, Arial, Verdana, Tahoma, sans-serif;\n        background-image: linear-gradient(rgba(51,51,51,0),rgba(0,0,0,.4));\n        width: 100%;\n        box-sizing: border-box;\n        padding: 15% 5% 5% 5%;\n    }\n    .overlay .basic-info h1 {\n        font-size: var(--title-10-font-size);\n        line-height: var(--title-10-line-height);\n        font-weight: var(--bam-player-overlay-font-weight, bold);\n        margin: 0;\n    }\n    .overlay .basic-info:not(.wrap-text) h1 {\n        white-space: nowrap;\n        text-overflow: ellipsis;\n        overflow: hidden;\n    }\n    .wrapper:not(.player-ui-loaded) {\n        cursor: pointer;\n    }\n    .wrapper:not(.player-ui-loaded) iframe {\n        pointer-events: none;\n    }\n    .wrapper.player-ui-loaded .overlay {\n        display: none;\n    }\n    ${o&&"\n        .wrapper:not(.is-playing) iframe {\n            opacity: 0;\n        }\n        "}\n    `})({aspectRatio:i,fontSize:s,showOnlyThumbnails:o,poster:c,playerFit:a})}_getBasicInfoAsText(){const{title:e}=this._event||{};if(!e)return"";const{title:t,overlayTextWrap:i}=this._settings;return t?`\n      <div class="basic-info ${i?"wrap-text":""}">\n        <h1 class="title">${e}</h1>\n      </div>\n    `:""}_getProductInfo(){const{_products:e,_settings:t}=this,{showProducts:i}=this._attr;if(!(i&&t.products&&e&&e.length))return"";const{title:n,brand:r,thumbnail:s,price:o,currency:a}=e[0],l=`<div class="product-thumbnail-wrapper">\n        <img src="${s}" alt="${n}" />\n      </div>`;let d=`<div class="product-info">\n        <div class="product-title">${n}</div>\n        ${r?`<div class="product-subtitle">${r}</div>`:""}\n        ${o?`<div class="product-price">${o} ${a}</div>`:""}\n      </div>`;return"thumbnail"===t.productCardMode&&(d=""),`\n      <div class="products">\n          <div class="product">\n            ${l}\n            ${d}\n          </div>\n      </div>\n    `}_updateOverlayDOM(){const{overlay:e}=this,t=this._getProductInfo(),i=this._getBasicInfoAsText();e.innerHTML=t?`${t}`:`${i}`}_setupDOM(){this.shadow.innerHTML="";const e=document.createElement("style");this.styleSheet=e;const t=document.createElement("div");t.classList.add("placeholder");const i=document.createElement("div");i.classList.add("overlay"),this.overlay=i;const n=document.createElement("div");n.classList.add("wrapper"),this.wrapper=n;const r=document.createElement("iframe");if(r.setAttribute("allow","fullscreen; autoplay; web-share"),r.setAttribute("frameborder","0"),r.setAttribute("allowTransparency","1"),r.setAttribute("title","Live video shopping"),this.iframe=r,n.appendChild(i),n.appendChild(r),this.shadow.appendChild(e),this.shadow.appendChild(t),this.shadow.appendChild(n),"ResizeObserver"in window){const e=new window.ResizeObserver((()=>{Ke((()=>{this._isPlayerUILoaded||this._updateStylesheet()}),0)}));e.observe(n),this._unloadResizeObserver=()=>e.disconnect()}}_setupDOMEventListeners(){if(this._hasDOMEventListeners)return;this._hasDOMEventListeners=!0;const{autoplay:e,standalone:t}=this._attr,i=[];if(i.push((()=>this._hasDOMEventListeners=!1)),t){const e=()=>this._onClick();this.wrapper.addEventListener("click",e),i.push((()=>this.wrapper.removeEventListener("click",e)))}if("hover"===e){const e=e=>{"mouseenter"===e.type?this.play():this.pause()};this.wrapper.addEventListener("mouseenter",e),this.wrapper.addEventListener("mouseleave",e),i.push((()=>{this.wrapper.removeEventListener("mouseenter",e),this.wrapper.removeEventListener("mouseleave",e)}))}this._shouldDisconnectObserverWhenVisible=!0;const n=new window.IntersectionObserver((e=>{e[0].isIntersecting?(this._emit("visible"),this._shouldDisconnectObserverWhenVisible&&n.disconnect(),this._hasBeenVisible=!0):this._emit("hidden")}));if(n.observe(this.wrapper),i.push((()=>n.disconnect())),"visible"===e){this._shouldDisconnectObserverWhenVisible=!1,this._isVisibleOnPage()&&this.play();const e=()=>this.play(),t=()=>this.pause();this.addEventListener("visible",e),this.addEventListener("hidden",t),i.push((()=>{this._shouldDisconnectObserverWhenVisible=!0,this.removeEventListener("visible",e),this.removeEventListener("hidden",t)}))}this._unloadDOMEventListeners=()=>{i.forEach((e=>e()))}}_isVisibleOnPage(){if(!this.wrapper)return!1;if("checkVisibility"in this.wrapper&&!this.wrapper.checkVisibility())return!1;const{top:e,bottom:t}=this.wrapper.getBoundingClientRect();return e<window.innerHeight&&t>0}_setupPlayerPageEventListeners(){const e=this._getPlayerUrl(),{origin:t}=new URL(e),i=e=>{let{data:i,origin:n}=e;if(n!==t)return;const{eventName:r,data:s,widgetId:o,isVod:a}=i||{};if(o===this._id){if("baas-player:eventData"===r){this._event=s,this._updateOverlayDOM(),this._updateStylesheet();const e=()=>{this._trackMetric("on-initialized",{...this._attr}),this.removeEventListener("visible",e)};this._hasBeenVisible?e():this.addEventListener("visible",e)}if("baas-player:broadcastData"===r&&(this._videoWidth=s?.width,this._videoHeight=s?.height,this._isReady=!0,this.setScaleMode("aspectFill"),this.setObjectPosition("center"),this._updateStylesheet(),"visible"===this._attr.autoplay&&this._isVisibleOnPage()&&this.play()),"baas-player:products"===r&&(this._products=s,this._updateOverlayDOM()),"baas-player:playing"===r){if(!this._isPlaying&&a){const e=isNaN(this._currentTime)||0===this._currentTime?"on-play":"on-resume";this._trackMetric(e),"on-play"===e&&this._emitOnProgress(3,!1),this._emitOnProgress(30,!0)}this.wrapper.classList.add("is-playing"),this._isPlaying=!0,this._emit("playing")}"baas-player:pause"===r&&(this._isPlayerUILoaded||this.wrapper.classList.remove("is-playing"),this._isPlaying&&a&&this._trackMetric("on-pause"),this._isPlaying=!1,this._emit("pause"),this._clearProgressEmissions()),"baas-player:ended"===r&&(a&&this._trackMetric("on-stop"),this._onEnded(),this._clearProgressEmissions()),"baas-player:timeupdate"===r&&(this._currentTime=s?.currentTime||0)}};window.addEventListener("message",i),this._unloadPlayerEventListeners=()=>{window.removeEventListener("message",i)}}_setup(){if(this._isReady=!1,this._event=null,this._products=null,this._isPlayerUILoaded=!1,this._currentTime=this._attr.videoId?0:void 0,!this._didDefer&&"loading"===document.readyState)return this._didDefer=!0,void document.addEventListener("DOMContentLoaded",(()=>this._setup()));if(!this._didDefer2&&"requestIdleCallback"in window)return this._didDefer2=!0,void window.requestIdleCallback((()=>{this._setup()}),{timeout:5e3});if(this._unloadDOMEventListeners?.(),this._unloadPlayerEventListeners?.(),this._attr.eventId||this._attr.videoId){if(this._attr.eventId&&this._attr.videoId)throw new Error("Both eventId and videoId cannot be set at the same time");this._createEmbedInstance(),this._setupDOMEventListeners(),this._setupPlayerPageEventListeners(),this._updateSettingsFromAttributes(),this._updateStylesheet(),this.iframe.src=this._getPlayerUrl()}}_createEmbedInstance(){const{eventId:e,videoId:t}=this._attr,i=e||t;if(!i)return;this.embedInstance&&this.embedInstance.destroy();const n=new $e({eventId:i,type:"overlay",containerNode:this.wrapper,hideProducts:!1===this._attr?.showProducts});this.embedInstance=n,this.embedInstance.mountPlayerAPI(i),this.embedInstance.applyProviderConfig(),n.playerDelegate.on("close",(()=>{this._onClose(),this._emit("close")})),n.playerDelegate.on("playback-status",(e=>{e?.ended&&this._onEnded()})),n.playerDelegate.on("should-show-product-list",(()=>this._onProductListShown())),n.playerDelegate.on("should-hide-product-list",(()=>this._onProductListHidden())),n.playerDelegate.on("should-show-product-view",(()=>this._onProductViewShown())),n.playerDelegate.on("should-hide-product-view",(()=>this._onProductViewHidden())),n.playerDelegate.on("player-swipe-right",(()=>this._emit("swipe-right"))),n.playerDelegate.on("player-swipe-left",(()=>this._emit("swipe-left"))),n.playerDelegate.on("player-swipe-up",(()=>this._emit("swipe-up"))),n.playerDelegate.on("player-swipe-down",(()=>this._emit("swipe-down")))}_onProductViewShown(){this._isProductViewShown=!0}_onProductViewHidden(){this._isProductViewShown=!1}_onProductListShown(){this._isProductListShown=!0}_onProductListHidden(){this._isProductListShown=!1}hasImportantUIShown(){return this._isProductViewShown||this._isProductListShown}_onClick(){this._isReady&&(this._loadPlayerUI(),this.wrapper.classList.add("is-expanded"))}_onClose(){this._unloadPlayerUI(),this.wrapper.classList.remove("is-expanded"),this.wrapper.style=""}_onEnded(){this._attr.loop&&!this._isPlayerUILoaded&&Ke((()=>{this.setCurrentTime(0),this.play()}),500),this._emit("ended")}_tearDown(){this.shadow.innerHTML="",this._isReady=!1,this._event=null,this._products=null,this._isPlayerUILoaded=!1,this._currentTime=void 0,this._unloadDOMEventListeners?.(),this._unloadPlayerEventListeners?.(),this._updateOverlayDOM(),this.embedInstance?.destroy(),delete this.embedInstance}_loadPlayerUI(){this._isPlayerUILoaded||(this._isPlayerUILoaded=!0,this._unloadDOMEventListeners?.(),this._attr.standalone?this.embedInstance.show():this.embedInstance.loadPlayer(),this.iframe.contentWindow.postMessage("initReactApp","*"),this.unmute(),this.play(),this.wrapper.classList.add("player-ui-loaded"),this._isPlayerUILoaded=!0,this._hasTrackedPlayerUILoaded||(this._hasTrackedPlayerUILoaded=!0,this._trackMetric("on-interaction",{interactionType:"load-player-ui"})))}_unloadPlayerUI(){this.mute(),this._isProductViewShown=!1,this._isProductListShown=!1,this.iframe.contentWindow.postMessage("unloadReactApp","*"),this._createEmbedInstance(),this._setupDOMEventListeners(),this.wrapper.classList.remove("player-ui-loaded"),this._isPlayerUILoaded=!1}_emit(e){const t=new window.CustomEvent(e);this.dispatchEvent(t)}_trackMetric(e,t){if(this._isPlayerUILoaded)return;const i=this._attr.videoId?"vod-":"";this.embedInstance._trackMetric(e,{orgId:this._event?.orgId,playerVersion:2,source:"player",sourceApp:`${i}player-web-components`,isPlaying:this._isPlaying??!1,schemaVersion:"2.0.0",clientTimestamp:(new Date).toISOString(),videoCurrentTime:isNaN(this._currentTime)?0:Math.floor(this._currentTime),distributionPageId:this._attr.distributionPageId,distributionContainerId:this._attr.distributionContainerId,...this._event&&{isLive:this._event.isLive},...t})}_emitOnProgress(e,t){this._emitProgressTimeouts??={};const i=`${e}:${t}`;window.clearTimeout(this._emitProgressTimeouts[i]);const n=()=>{this._trackMetric("on-progress"),this._emitProgressTimeouts[i]=t?Ke(n,1e3*e):null};this._emitProgressTimeouts[i]=Ke(n,1e3*e)}_clearProgressEmissions(){this._emitProgressTimeouts&&Object.values(this._emitProgressTimeouts)?.forEach((e=>window.clearTimeout(e)))}play(){this._sendPlayerControlMessage("play")}pause(){this._sendPlayerControlMessage("pause")}unmute(){this._sendPlayerControlMessage("unmute")}mute(){this._sendPlayerControlMessage("mute")}setCurrentTime(e){if("number"!=typeof e||e<0)throw new Error("setCurrentTime() expects a number");this._sendPlayerControlMessage("load",{time:e})}setScaleMode(e){this._sendPlayerControlMessage("setScaleMode",e)}setObjectPosition(e){this._sendPlayerControlMessage("setObjectPosition",e)}_sendPlayerControlMessage(e,t){this.iframe?.contentWindow&&this.iframe.contentWindow.postMessage({eventName:`widgets:${e}`,data:t},"*")}}const et=e=>e?.getAttribute("style")||"",tt=(e,t)=>e?.setAttribute("style",t||""),{fetch:it,setTimeout:nt,clearTimeout:rt}=window,st=ve.isParamTrue("bambuserVodDiscover"),ot={},at=(e,t)=>((()=>{const t=ot[e];return t?Date.now()-t.time>1e4?(delete ot[e],null):t:null})()||(ot[e]={time:Date.now(),res:t()}),ot[e].res),lt=async e=>{let{videosDataSource:t,eventIds:i,channelId:n,videoIds:r,orgId:s,query:o,containerId:a,cursor:l}=e,d=[],c={},h=null,u=null,p=null;if("shows"===t&&Array.isArray(i)&&i.length>0)d=i;else if("vod"===t&&Array.isArray(r)&&r.length>0)d=r;else if("shows"===t&&n){const e=`channel-${n}`,{playlists:t}=await at(e,(()=>it(`https://svc-prod-us.liveshopping.bambuser.com/widgets/channels/${n}`).then((e=>e.json())).then((e=>e||{}))));for(const{shows:e}of t)if(Array.isArray(e))for(const{showId:t,isLive:i,isArchived:n,duration:r,isTestShow:s}of e)!t||!i&&!n||r<=0||s||d.includes(t)||d.push(t)}else if("vod"===t&&s){const{productReference:e}=ht(),t={orgId:s,query:o,containerId:a,url:ct(),title:document.title,...e&&{sku:e},...l&&{cursor:l}},i=new URLSearchParams;for(const[e,n]of Object.entries(t))n&&i.append(e,n);const n=`org-${s}-${i.toString()}`,{data:r,pagination:m}=await at(n,(()=>it("https://svc-prod-us.liveshopping.bambuser.com/widgets/distribution"+(i?`?${i.toString()}`:"")).then((e=>e.json())).then((e=>e||{}))));p=m?.cursor||null,d=r?.playlist||[],c=r?.playerConfig||{},h=r?.pageId,u=r?.id}return{nextCursor:p,playlist:d,playerConfig:c,distributionPageId:h,distributionContainerId:u}},dt=e=>{const t=["sku","gtin","gtin8","gtin12","gtin13","gtin14","productID"];for(const i of t){if(e.productReference)break;if(e[i]){e.productReference=e[i];break}}return e},ct=()=>{const e=document.querySelector('link[rel="canonical"]');if(e&&e.href)return e.href;const t=document.querySelector('meta[property="og:url"]');return t&&t.content?t.content:window.location.href},ht=()=>{const e={productReference:null};try{const t=[()=>(()=>{const e={},t=document.querySelector('input[name="product-id"][type="hidden"]');return t?.value&&(e.productReference=t.value),e})(),()=>dt((()=>{const e={},t=document.querySelectorAll('script[type="application/ld+json"]');for(const i of t)try{const t=JSON.parse(i.textContent);if("Product"===t["@type"])for(const[i,n]of Object.entries(t))e[i]||(e[i]=n)}catch(e){console.error("Error parsing JSON-LD",e)}return e})()),()=>dt((()=>{const e={},t=document.querySelector('[itemtype="http://schema.org/Product"]');if(t){const i=t.querySelectorAll("[itemprop]");for(const t of i){const i=t.getAttribute("itemprop"),n=t.innerText;e[i]||(e[i]=n)}}return e})())];for(const i of t){const t=i();for(const i of Object.keys(e))!e[i]&&t[i]&&(e[i]=t[i]);if(Object.values(e).every(Boolean))break}}catch(e){}return e};class ut extends window.HTMLElement{static observedAttributes=["channel-id","event-ids","mode","focus-mode","autoplay","limit","video-ids","org-id","query","playlist-id","player-settings","zoom-on-hover","player-fit"];constructor(){super(),this.shadow=this.attachShadow({mode:"open"}),document.addEventListener("keyup",(e=>{"Escape"===e.key&&this._contract()})),this._playerSettings=je(),this._remotePlayerConfig={}}connectedCallback(){this._hasConnected||(this._hasConnected=!0,this._setup())}disconnectedCallback(){this._updateStylesheet()}attributeChangedCallback(e,t,i){this._hasConnected&&t!==i&&(["channel-id","event-ids","focus-mode","autoplay","limit","video-ids","org-id","query","playlist-id"].includes(e)?this._setup():("player-settings"===e&&(this._updatePlayersSettingsFromAttributes(),this._applyPlayerSettingsUpdate(),this._updateStylesheet()),"mode"===e&&this._updateStylesheet()))}get channelId(){return this.getAttribute("channel-id")}get eventIds(){return(this.getAttribute("event-ids")||"").split(",").map((e=>e.trim())).filter(Boolean)}get videoIds(){return(this.getAttribute("video-ids")||"").split(",").map((e=>e.trim())).filter(Boolean)}get orgId(){return this.getAttribute("org-id")}get _videosDataSource(){const{eventIds:e,videoIds:t,channelId:i,orgId:n}=this;return Array.isArray(e)&&e.length>0?"shows":Array.isArray(t)&&t.length>0?"vod":i?"shows":n?"vod":null}get _attr(){const{orgId:e,channelId:t,eventIds:i,videoIds:n,_videosDataSource:r}=this,s=parseInt(this.getAttribute("limit"),10),o=Number.isSafeInteger(s)?Math.max(0,Math.min(parseInt(s,10),20)):20,a=[...Array.prototype.slice.call(document.querySelectorAll("bam-bundle")),...Array.prototype.slice.call(document.querySelectorAll("bam-playlist"))].filter((t=>t===this||t._videosDataSource===r&&("vod"!==r||t.orgId===e))).indexOf(this),l=a>=0?`playlist-auto-id-${a}`:null,{productCardMode:d}=this._remotePlayerConfig||{},c={...d&&{productCardMode:d}},h=qe(c);return{videosDataSource:r,channelId:t,eventIds:i,mode:this.getAttribute("mode")||this._remotePlayerConfig?.mode||"grid",focusMode:this.getAttribute("focus-mode")||this._remotePlayerConfig?.focusMode||"carousel",autoplay:this.getAttribute("autoplay")||this._remotePlayerConfig?.autoplay||"hover",videoIds:n,orgId:e,query:this.getAttribute("query")||"auto",containerId:this.getAttribute("playlist-id")||l,playerSettings:this.getAttribute("player-settings")||h,zoomOnHover:"true"===this.getAttribute("zoom-on-hover"),limit:o,playerFit:this.getAttribute("player-fit")||Xe.SAME_WIDTH}}_updateStylesheet(){if(!this._styleSheet)return;const{zoomOnHover:e}=this._attr;let t="";switch(this._attr.playerFit){case Xe.FILL_PARENT:t="\n          .wrapper:not(.is-expanded) bam-player {\n            width: 100%;\n            max-width: 100%;\n            height: 100%;\n            max-height: 100%;\n          }\n        ";break;case Xe.EXACT_SIZE:t="\n          .wrapper:not(.is-expanded) bam-player {\n            width: var(--bam-player-width, 250px);\n            max-width: var(--bam-player-width, 250px);\n            height: var(--bam-player-height, 444px);\n            max-height: var(--bam-player-height, 444px);\n          }\n        ";break;case Xe.SAME_HEIGHT:t="\n          .wrapper:not(.is-expanded) bam-player {\n            height: var(--bam-player-height, 444px);\n            max-height: var(--bam-player-height, 444px);\n          }\n        ";break;default:t="\n          .wrapper:not(.is-expanded) bam-player {\n            width: var(--bam-player-width, 250px);\n            max-width: var(--bam-player-width, 250px);\n          }\n        "}let i="";switch(this._attr.mode){case"row":i=`\n          :host {\n            width: 100%;\n            display: flex;\n            flex-direction: row;\n            justify-content: center;\n          }\n          ${t}\n          .wrapper:not(.is-expanded) .player-container {\n            overflow-x: scroll;\n\n            -ms-overflow-style: none;\n            scrollbar-width: none;\n          }\n          .wrapper:not(.is-expanded) .player-container::-webkit-scrollbar {\n            display: none;\n          }\n        `;break;case"single":i=`\n          ${this._attr.playerFit===Xe.FILL_PARENT?"\n          :host,\n          .wrapper:not(.is-expanded),\n          .wrapper:not(.is-expanded) .player-container,\n          .wrapper:not(.is-expanded) .player-container .player-wrapper {\n            width: 100%;\n            height: 100%;\n          }\n          ":"\n          :host {\n            width: fit-content;            \n          }"}\n          ${t}\n          .wrapper:not(.is-expanded) .player-container {\n            display: flex;\n          }\n          .wrapper:not(.is-expanded) .player-container .player-wrapper:not(:first-child) {\n            display: none;\n          }\n        `;break;default:i=`\n          .player-container {\n            flex-wrap: wrap;\n          }\n          .wrapper.is-expanded .player-container {\n            display: flex;\n            flex-wrap: nowrap;\n          }\n          ${t}\n        `}const n=!this._isExpanded&&e,r=this._remotePlayerConfig?.thumbnailSize;if(this._autoDetectedFontFamily)this._autoDetectedFontFamily&&(this._autoDetectedFontFamily=void 0);else{const e=((e,t,i)=>{i||(i=document.body);const n=document.createElement("h1");n.style.display="none",i.appendChild(n);const r=window.getComputedStyle(n).fontFamily;return i.removeChild(n),r})();e&&(this._autoDetectedFontFamily=e)}this._styleSheet.textContent=`\n      :host {\n        display: block;\n        ${r?`--bam-player-thumbnail-size: ${r};`:""}\n        ${this._autoDetectedFontFamily?`--bam-player-auto-detected-overlay-font-family: ${this._autoDetectedFontFamily}`:""};\n        --internal-font-family: var(--bam-player-overlay-font-family, var(--bam-player-auto-detected-overlay-font-family));\n      }\n      .wrapper {\n        width: 100%;\n      }\n      .player-container {\n        display: flex;\n      }\n      .player-wrapper {\n        display: inline-block;\n      }\n      .close-button {\n        position: absolute;\n        top: 10px;\n        right: 10px;\n        padding: 10px;\n        z-index: 10000001;\n        cursor: pointer;\n        display: none;\n        color: white;\n        text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);\n        font-size: 32px;\n        opacity: 0.4;\n      }\n      .load-more-button {\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        padding: 10px;\n        position: relative;\n        overflow: hidden;\n        overscroll-behavior: none;\n        font-weight: var(--bam-player-overlay-font-weight, bold);\n        border-radius: var(--bam-player-corner-radius, 10px);\n        font-family: var(--internal-font-family), Helvetica, Arial, Verdana, Tahoma, sans-serif;\n        cursor: pointer;\n        color: black;\n        flex-shrink: 0;\n      }\n      .close-button:hover,\n      .load-more-button:hover {\n        opacity: 0.8;\n      }\n      .wrapper:not(.is-expanded) .player-container {\n        gap: var(--bam-playlist-gap, var(--bam-bundle-gap, 25px));\n      }\n      .wrapper:not(.is-expanded) bam-player {\n        cursor: pointer;\n        z-index: 1;\n      }\n      ${n?"\n        .wrapper:not(.is-expanded) .player-container {\n          padding: 50px 0;\n          padding-left: calc(0.03 * var(--bam-player-width, 250px));\n          padding-left: calc(round(up, 0.03 * var(--bam-player-width, 250px), 1px));\n          padding-right: calc(0.03 * var(--bam-player-width, 250px));\n          padding-right: calc(round(up, 0.03 * var(--bam-player-width, 250px), 1px));\n        }\n        .wrapper:not(.is-expanded) .player-wrapper {\n          transition: transform 300ms ease;\n        }\n        .wrapper:not(.is-expanded) .player-wrapper:hover {\n          z-index: 10;\n          transform: scale(1.06);\n        }\n        .wrapper:not(.is-expanded) .player-wrapper:hover bam-player {\n          transition: box-shadow 300ms ease-in;\n          box-shadow: 0 0 8px rgba(0, 0, 0, 0.3);\n        }\n      ":""}\n      .wrapper.is-expanded {\n        z-index: 10000000;\n        inset: 0px;\n        position: fixed;\n        height: 100%;\n      }\n      .wrapper.is-expanded .player-wrapper {\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-content: center;\n        align-items: flex-start;\n        height: 100%;\n      }\n      .wrapper.is-expanded .dimmer {\n        position: absolute;\n        inset: 0px;\n        background-color: rgba(0, 0, 0, 1);\n        z-index: -1;\n      }\n      .wrapper.is-expanded .player-container {\n        white-space: nowrap;\n        position: absolute;\n        height: 100%;\n        column-gap: 25px;\n      }\n      .wrapper.is-expanded .close-button {\n        display: block;\n      }\n      .wrapper.is-expanded .player-wrapper:not(.focused) {\n        opacity: 0.2;\n        transition: opacity 0.5s;\n      }\n      .wrapper.is-expanded .player-wrapper:not(.focused) bam-player {\n        cursor: pointer;\n      }\n      /* touch devices will not have hover */\n      @media (orientation: portrait) and (hover: none) {\n        .wrapper.is-expanded {\n          justify-content: flex-start;\n        }\n        .wrapper.is-expanded .player-container {\n          width: 100%;\n          flex-direction: column;\n          height: auto;\n        }\n        .wrapper.is-expanded .player-wrapper {\n          width: 100%;\n          inset: 0px;\n          margin: 0;\n          height: 100vh; /* Fallback for browsers that do not support custom css properties */\n          height: calc(var(--vh, 1vh) * 100);\n        }\n        .wrapper.is-expanded bam-player {\n          border-radius: 0;\n          inset: 0px;\n          width: 100%;\n          height: 100%;\n          max-width: none;\n          --bam-player-placeholder-color: #000;\n        }\n      }\n      /* non-touch devices will have hover */\n      @media (orientation: portrait) and (hover: hover) {\n        .wrapper.is-expanded .player-container {\n          height: auto;\n          width: 100%;\n          flex-direction: column;\n          row-gap: 25px;\n        }\n        .wrapper.is-expanded .player-wrapper {\n          height: 80vh;\n          align-items: center;\n        }\n        .wrapper.is-expanded bam-player {\n          max-height: 80vh;\n          max-width: 80vw;\n          height: 100%;\n          width: auto;\n          border-radius: var(--bam-playlist-carousel-corner-radius, var(--bam-bundle-carousel-corner-radius, 20px));\n          --bam-player-placeholder-color: transparent;\n        }\n      }\n      @media (orientation: landscape) {\n        .player-container {\n          flex-direction: row;\n        }\n        .wrapper.is-expanded bam-player {\n          max-height: 80vh;\n          max-width: 80vw;\n          height: 100%;\n          width: auto;\n\n          /*\n            If a player is slimmer than this and expected to present interactive UI the player is expected\n            to be presented in an accessibility type of way, and the player will apply a overflow scroll type\n            which lets the user scroll around in the player to see all elements, which is not what we want when\n            presented in a carousel type of way.\n          */\n          min-width: 320px;\n          border-radius: var(--bam-playlist-carousel-corner-radius, var(--bam-bundle-carousel-corner-radius, 20px));\n\n          --bam-player-placeholder-color: transparent;\n        }\n        .wrapper.is-expanded .load-more-button {\n          color: white;\n        }\n      }\n      ${i}\n      ${st&&"vod"===this._videosDataSource?"\n      :host {\n        border: 2px solid #7D58EE;\n      }\n      .wrapper {\n        position: relative;\n      }\n      .discover-meta {\n        color: #7D58EE;\n        position: absolute;\n        top: 4px;\n        left: 4px;\n      }\n      ":""}\n    `}_bumpVhCSSVariable(){const e=.01*window.innerHeight;this._wrapper.style.setProperty("--vh",`${e}px`)}_applyPlayerSettingsUpdate(){const{playerSettings:e}=this._attr;e&&this._players?.length&&this._players.forEach((t=>{t.setAttribute("settings",e)}))}_updatePlayersSettingsFromAttributes(){const{playerSettings:e}=this._attr;e&&(this._playerSettings={...this._playerSettings,...Ye(e)})}async _setup(){const e=this._setupIdIndex=(this._setupIdIndex||0)+1;this._lastSetupId=e;let t=[];try{const{playlist:e,playerConfig:i,distributionPageId:n,distributionContainerId:r,nextCursor:s}=await lt(this._attr);t=e,this._remotePlayerConfig=i,this._distributionPageId=n,this._distributionContainerId=r,this._nextPaginationCursor=s}catch(e){console.error("Failed to load playlist",e)}if(this._lastSetupId!==e)return;const{focusMode:i,autoplay:n,limit:r,playerFit:s,mode:o}=this._attr;if(!["carousel","single","playpause","none"].includes(i))return void console.error('Invalid "focusMode" attribute. Must be either "carousel", "single", "playpause" or "none".');if(!["cascade","hover","none"].includes(n))return void console.error('Invalid "autoplay" attribute. Must be either "cascade" or "hover" or "none".');if(!Object.values(Xe).includes(s))return void console.error(`Invalid "playerFit" attribute. Must be either ${Object.values(Xe).join(" or ")}.`);if(s===Xe.FILL_PARENT&&1!==r&&"single"!==o)return void console.error('The "fill-parent" player fit mode can only be used with a limit of 1 or mode "single".');if(0===r)return void console.info("The limit is set to 0, so no players will be rendered.");if(this.shadow.innerHTML="",this._stopAutoplayCascade(),!t.length&&!st)return;this._updatePlayersSettingsFromAttributes();const a=document.createElement("style");this._styleSheet=a;const l=document.createElement("div");l.classList.add("wrapper"),this._wrapper=l;const d=document.createElement("div");d.classList.add("dimmer");const c=document.createElement("div");c.classList.add("player-container"),this._playerContainer=c;const h=document.createElement("div");if(h.classList.add("close-button"),h.textContent="✕",h.addEventListener("click",(()=>this._contract())),this.shadow.appendChild(a),this.shadow.appendChild(l),l.appendChild(d),l.appendChild(h),l.appendChild(c),"vod"===this._videosDataSource){if(this._nextPaginationCursor&&t.length<r){const e=document.createElement("div");e.classList.add("load-more-button"),e.textContent="Load more",e.addEventListener("click",this._loadNextPaginationCursor),e.style.order=Number.MAX_SAFE_INTEGER,c.appendChild(e),this._loadMoreButton=e}if(st){const e=document.createElement("div");e.classList.add("discover-meta"),e.textContent=`${this._attr.containerId}`,l.appendChild(e)}}this._updateStylesheet(),this._determineScrollDirection(),this._players=t.slice(0,r).map((e=>this._createBamPlayer({eventId:e,focusMode:i,autoplay:n,isSingleVideo:1===t.length,playerFit:s}))),this._startAutoplayCascade(),this._bumpVhCSSVariable(),window.addEventListener("resize",(()=>{this._bumpVhCSSVariable(),this._determineScrollDirection(),this._setFocusedPlayer(this._focusedPlayer,!1)}))}_createBamPlayer=e=>{let{eventId:t,focusMode:i,autoplay:n,isSingleVideo:r,playerFit:s}=e;const o=document.createElement("bam-player");if(this._distributionPageId&&o.setAttribute("distribution-page-id",this._distributionPageId),this._distributionContainerId&&o.setAttribute("distribution-container-id",this._distributionContainerId),o.setAttribute("settings",qe(this._playerSettings)),"vod"===this._videosDataSource?o.setAttribute("video-id",t):o.setAttribute("event-id",t),o.setAttribute("player-fit",s),"hover"===n)o.setAttribute("autoplay","hover");else if("cascade"===n){const e=e=>{this._isExpanded||("mouseenter"===e.type?(this._stopAutoplayCascade(),o.play()):this._startAutoplayCascade(o))};r||(o.addEventListener("mouseenter",e),o.addEventListener("mouseleave",e))}const a=()=>{const e={["vod"===this._videosDataSource?"videoId":"eventId"]:t};this.dispatchEvent(new CustomEvent("clickplayer",{detail:e}))};"carousel"===i&&(o.setAttribute("standalone","false"),o.addEventListener("close",(()=>this._contract())),r||(o.addEventListener("swipe-up",(()=>"vertical"===this._scrollDirection&&this._next())),o.addEventListener("swipe-down",(()=>"vertical"===this._scrollDirection&&this._prev()))),o.addEventListener("ended",(()=>{this._focusedPlayer!==o||this._focusedPlayer.hasImportantUIShown()||this._next()})),o.addEventListener("click",(()=>{this._expand(),this._setFocusedPlayer(o,!0),a()}))),"single"===i&&(o.addEventListener("click",(()=>{o._onClick(),this._isExpanded=!0,this._updateStylesheet(),o.parentNode.style.zIndex=1e7,a()})),o.addEventListener("close",(()=>{this._isExpanded=!1,this._updateStylesheet(),o.parentNode.style.zIndex=null}))),"playpause"===i&&(o.setAttribute("standalone","false"),o.addEventListener("click",(()=>{o._isPlaying?o.pause():o.play(),a()}))),"none"===i&&o.addEventListener("click",(e=>{e.stopPropagation(),a()}),{capture:!0}),this._remotePlayerConfig?.loop&&o.setAttribute("loop","true"),void 0!==this._remotePlayerConfig?.showProducts?o.setAttribute("show-products",this._remotePlayerConfig.showProducts):o.removeAttribute("show-products");const l=document.createElement("div");return l.classList.add("player-wrapper"),l.appendChild(o),this._playerContainer.appendChild(l),l.style.order=Array.from(this._playerContainer.querySelectorAll(".player-wrapper")).indexOf(l)+1,o};_loadNextPaginationCursor=async()=>{if(!this._nextPaginationCursor)return;const{focusMode:e,autoplay:t,limit:i}=this._attr,n=Array.from(this._playerContainer.childNodes).filter((e=>e.classList.contains("player-wrapper"))).length;if(n>=i)return;let r=[];try{const{playlist:e,nextCursor:t}=await lt({...this._attr,cursor:this._nextPaginationCursor});r=e,this._nextPaginationCursor=t}catch(e){console.error("Failed to load playlist with cursor",{err:e,cursor:this._nextPaginationCursor})}this._players=this._players.concat(...r.slice(0,i-n).map((i=>this._createBamPlayer({eventId:i,focusMode:e,autoplay:t,isSingleVideo:1===r.length})))),(!this._nextPaginationCursor||this._players.length>=i)&&this._loadMoreButton?.remove()};_expand(){this._isExpanded||(this._isExpanded=!0,this._wrapper.classList.add("is-expanded"),this._bodyStylesCopy=et(document.body),document.body.style.overflow="hidden",document.body.style.width="100%",document.body.style.padding="0",document.body.style.margin="0",this._triggerMorePlayersHintAnimation(),this._stopAutoplayCascade())}_contract(){if(!this._isExpanded)return;this._isExpanded=!1,this._abortMorePlayersHint?.(),this._wrapper.classList.remove("is-expanded");const e=this._focusedPlayer;this._setFocusedPlayer(null),tt(document.body,this._bodyStylesCopy),Array.from(this._playerContainer.childNodes).filter((e=>e.classList.contains("player-wrapper"))).forEach((e=>{const t=e.children[0];t.pause(),t._unloadPlayerUI()})),this._startAutoplayCascade(e)}_setFocusedPlayer(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._focusedPlayer&&this._focusedPlayer!==e&&(this._focusedPlayer.pause(),this._focusedPlayer._unloadPlayerUI(),this._focusedPlayer.parentNode.classList.remove("focused")),!e)return this._focusedPlayer=null,this._playerContainer.style.transition="none",this._playerContainer.style.left="0",void(this._playerContainer.style.top="0");if(this._focusedPlayer||(t=!1),this._focusedPlayer=e,this._focusedPlayer.setCurrentTime(0),this._focusedPlayer._loadPlayerUI(),this._focusedPlayer.parentNode.classList.add("focused"),this._playerContainer.style.transition=t?"left 0.3s, top 0.3s":"none","vertical"===this._scrollDirection){const t=-e.offsetTop+(window.innerHeight-e.offsetHeight)/2;this._playerContainer.style.top=`${t}px`,this._playerContainer.style.left="0px"}else{const t=-e.offsetLeft+(window.innerWidth-e.offsetWidth)/2;this._playerContainer.style.left=`${t}px`,this._playerContainer.style.top="0px"}}_startAutoplayCascade(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this._players?.length&&!e)return;if("cascade"!==this._attr.autoplay)return;if(this._isCascadeRunning)return;this._isCascadeRunning=!0,this._curCascadePlayer=null;const t=()=>{let i;e?(i=e,e=null):i=this._players[this._players.indexOf(this._curCascadePlayer)+1]||this._players[0];const n=()=>{i.removeEventListener("playing",n),this._curCascadePlayer?.setAttribute("autoplay","hover"),this._curCascadePlayer=i,this._isCascadeRunning?(((e,t)=>{if(e&&t){const i=parseFloat(window.getComputedStyle(t).getPropertyValue("width")),n=Math.ceil(.03*i),r=t.offsetLeft-e.offsetLeft-n;e.scrollTo({left:r,behavior:"smooth"})}})(this._playerContainer,i),this._players.length>1&&(this._cascadePlayerTimeoutHandle=nt(t,4e3))):i?.setAttribute("autoplay","hover")};i.addEventListener("playing",n),i.setAttribute("autoplay","visible")};t()}_stopAutoplayCascade(){this._curCascadePlayer?.pause(),rt(this._cascadePlayerTimeoutHandle),this._isCascadeRunning=!1}_determineScrollDirection(){const e=this._scrollDirection;this._scrollDirection=window.innerHeight>window.innerWidth?"vertical":"horizontal",e!==this._scrollDirection&&this._setFocusedPlayer(this._focusedPlayer,!1)}_triggerMorePlayersHintAnimation(){const{focusMode:e}=this._attr;if("carousel"===e&&!this._hasIndicatedMorePlayers&&this._players.length>1){let e,t,i,n;const r=this._nextPlayer;this._abortMorePlayersHint=()=>{tt(this._playerContainer,n),r.parentNode.style.opacity=null,rt(e),rt(t),rt(i),delete this._abortMorePlayersHint},e=nt((()=>{const e=window.matchMedia("(hover: none)").matches;if("vertical"!==this._scrollDirection||!r||!e)return;this._hasIndicatedMorePlayers=!0,r.play(),r.parentNode.style.opacity=1,n=et(this._playerContainer);const s=parseInt(this._playerContainer.style.top||0),o=s-100;this._playerContainer.style.transition="top 500ms ease-out",this._playerContainer.style.top=`${o}px`,t=nt((()=>{this._playerContainer.style.transition="top 500ms ease-in",this._playerContainer.style.top=`${s}px`,i=nt((()=>{r.pause(),this._abortMorePlayersHint()}),500)}),1250)}),3e3)}}get _nextPlayer(){if(!this._focusedPlayer)return this._players[0];const e=this._players.indexOf(this._focusedPlayer);return this._players[e+1]}_next(){if(this._isExpanded){this._abortMorePlayersHint?.();const e=this._players[this._players.indexOf(this._focusedPlayer)+1]||this._players[0];this._setFocusedPlayer(e,!0),this._players.indexOf(e)===this._players.length-1&&this._loadNextPaginationCursor()}}_prev(){if(this._isExpanded){this._abortMorePlayersHint?.();const e=this._players[this._players.indexOf(this._focusedPlayer)-1]||this._players[this._players.length-1];this._setFocusedPlayer(e,!0)}}}!function(t,i){if(t.initBambuserLiveShopping!==ze){const n=t.initBambuserLiveShopping&&t.initBambuserLiveShopping.queue?t.initBambuserLiveShopping.queue:[];t.initBambuserLiveShopping=ze,t.BambuserLiveShopping=i,t.BambuserLivecommerce=i;for(const e of n)try{e._wasQueuedAtStartup=!0,He(e)}catch(e){console.log(e)}const r=i=>{const n=K();n&&He(n[1],i).playerDelegate._publicAPI.on(e.wh.CLOSE,(()=>{t.location.hash=""}))};t.addEventListener("hashchange",r);const s=()=>{let e=14;const i=()=>{0==e--||t.onBambuserLiveShoppingReady?r(!0):t.setTimeout(i,300)};i()};"loading"!==document.readyState?s():document.addEventListener("DOMContentLoaded",s),function(e){const t=new URLSearchParams(e.location.search);if(t.has("autoplayLiveShopping")){const i=t.get("autoplayLiveShopping"),n=(t,r)=>{if(e.onBambuserLiveShoppingReady||1===t){if(document.querySelector("[data-bambuser-liveshopping-player-id]"))return;if(K())return;return e.initBambuserLiveShopping(i,!0)}e.setTimeout((()=>{n(--t,r)}),r)};n(14,300)}}(t)}}(window,$e),[["bam-player",Je],["bam-bundle",ut],["bam-playlist",class extends ut{}]].forEach((e=>{let[t,i]=e;window?.customElements?.define&&(window.customElements.get(t)||window.customElements.define(t,i))})),window&&(window.injectBambuserPlayer=e=>{if(e?.orgId)if(e?.containers&&Array.isArray(e.containers))for(const t of e.containers){if(!t?.selector){console.warn("injectBambuserPlayer: Invalid container configuration, missing selector. Skipping!");continue}const i=document.querySelector(t.selector);if(!i){console.warn(`injectBambuserPlayer: Selector "${t.selector}" didn't match any DOM node. Skipping!`);continue}const n=document.createElement("bam-playlist");n.setAttribute("org-id",e.orgId),t.focusMode&&n.setAttribute("focus-mode",t.focusMode),t.autoPlayMode&&n.setAttribute("autoplay",t.autoPlayMode),t.layoutMode&&n.setAttribute("mode",t.layoutMode),t.id&&n.setAttribute("id",t.id),t.playlistId&&n.setAttribute("playlist-id",t.playlistId),t.query&&n.setAttribute("query",t.query),i.appendChild(n)}else console.warn("injectBambuserPlayer: Invalid configuration, missing containers. Aborting!");else console.warn("injectBambuserPlayer: Invalid configuration, missing orgId. Aborting!")})})()})();
//# sourceMappingURL=embed.js.map