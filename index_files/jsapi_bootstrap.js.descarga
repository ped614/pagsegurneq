!function(){function d(){for(var e=0,t={};e<arguments.length;e++){var i,n=arguments[e];for(i in n)t[i]=n[i]}return t}function u(e){return e.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent)}window.Cookies=function e(s){function a(){}function i(e,t,i){if("undefined"!=typeof document){"number"==typeof(i=d({path:"/"},a.defaults,i)).expires&&0!=i.expires&&(i.expires=new Date(+new Date+864e5*i.expires)),i.expires=i.expires?i.expires.toUTCString():"";try{var n=JSON.stringify(t);/^[\{\[]/.test(n)&&(t=n)}catch(e){}t=s.write?s.write(t,e):encodeURIComponent(String(t)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),e=encodeURIComponent(String(e)).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/[\(\)]/g,escape);var o,r="";for(o in i)i[o]&&(r+="; "+o,!0!==i[o]&&(r+="="+i[o].split(";")[0]));return document.cookie=e+"="+t+r}}function t(e,t){if("undefined"!=typeof document){for(var i={},n=document.cookie?document.cookie.split("; "):[],o=0;o<n.length;o++){var r=n[o].split("="),a=r.slice(1).join("=");t||'"'!==a.charAt(0)||(a=a.slice(1,-1));try{var d=u(r[0]);if(a=(s.read||s)(a,d)||u(a),t)try{a=JSON.parse(a)}catch(e){}if(i[d]=a,e===d)break}catch(e){}}return e?i[e]:i}}a.set=i;a.get=function(e){return t(e,!1)};a.getJSON=function(e){return t(e,!0)};a.remove=function(e,t){i(e,"",d(t,{expires:-1}))};a.defaults={};a.withConverter=e;return a}(function(){})}();var _mailkit=[],mailkitRemarketing={_baseURL:"https://api.mailkit.eu/api/js_v1/",apiId:null,domain:null,_referrer:"&host="+document.domain,_cookies:[],_window:window.parent,mode:window.parent.scriptMode,_queue:[],enhancedECommerce:!1,_queueStatus:[],_dataLayerProcessed:[],_defaultDLEventTag:"cart",DLViewItemTag:"view",DLClickItemTag:"click",DLAddItemTag:"addToCart",DLRemoveItemTag:"removeFromCart",DLCheckoutTag:"checkout",DLFinishEventTag:"purchase",recombeeDBName:null,_cookie:function(e){return"_mktr_"+e},_debug:function(){if("debug"!=this.mode)return!1;for(var e=parent.document.getElementById("mkt_debug"),t=0;t<arguments.length;t++)null==e?console.log(arguments[t]):e.innerHTML+="<p>"+arguments[t]+"</p>";try{e.scrollTop=e.scrollHeight}catch(e){}return!0},_fireEvent:function(e){e=new CustomEvent(e);document.dispatchEvent(e)},_ident:"",_getTrkCookie:function(){var e,t=Cookies.get();for(e in t)if(e.toLowerCase()=="trk_"+this.apiId||e.toLowerCase()=="mkt_"+this.apiId)return this._ident=encodeURIComponent(t[e]),!0;return!1},_error:function(e,t){this._debug(e,document.cookie);e=encodeURIComponent("["+e+"] ["+this.apiId+"] ["+this.domain+"] [#v1] ["+(navigator.userAgent||navigator.vendor||"noUA")+"]"),t=t||"",this.domain,t="?action=events._logerror&hash="+Cookies.get(this._cookie(t))+"&msg="+e+("&tail="+Math.random()),e=document.createElement("img");e.src=this._baseURL+t+this._referrer,e.style.display="none",document.body.appendChild(e)},_inArray:function(e,t){for(var i=0,n=t.length;i<n;i++){if(t[i]==e)return i;0}return-1},_serialize:function(e){var t,i="";for(t in e)"_"!=t[0]&&(i+=t+"="+encodeURIComponent(e[t])+"&");return i},_prepareQS:function(e){var t="tail="+Math.random();return this._serialize(e)+t},_insertScript:function(e,t){var i=document.createElement("script");i.src=e,i.onload=function(){t()},document.body.appendChild(i)},_insertImage:function(e,t){var i=document.createElement("img");i.src=e,i.onload=function(){t()},document.body.appendChild(i)},_findInQueue:function(e){qLength=this._queue.length;for(var t=0;t<qLength;t++)if(this._objectEquals(this._queue[t].data,e))return e;return!1},_findInWindowVar:function(e){qLength=window.parent._mailkit.length;for(var t=0;t<qLength;t++)if(void 0!==window.parent._mailkit[t]&&this._objectEquals(window.parent._mailkit[t][1],e))return t;return-1},_addToQueue:function(e){void 0!==e[1].order_no&&"undefined"==e[1].order_no&&(e[1].order_no=""),this._queue.push({started:!1,data:e})},_objectEquals:function(t,i){if(null==t||null==i)return t===i;if(t.constructor!==i.constructor)return!1;if(t instanceof Function)return t===i;if(t instanceof RegExp)return t===i;if(t===i||t.valueOf()===i.valueOf())return!0;if(Array.isArray(t)&&t.length!==i.length)return!1;if(t instanceof Date)return!1;if(!(t instanceof Object))return!1;if(!(i instanceof Object))return!1;var n=Object.keys(t),o=this;return Object.keys(i).every(function(e){return-1!==n.indexOf(e)})&&n.every(function(e){return o._objectEquals(t[e],i[e])})},_init_hash:function(e){var t=e.event_tag||"",i=parseInt(e.lifetime)||90,n=(this.domain,Cookies.get(this._cookie(t)));e.hash!=n&&(Cookies.set(this._cookie(t),e.hash,{domain:this.domain,expires:i}),n=Cookies.get(this._cookie("event_tag"))),void 0===n&&(n=""),this._debug("_init_hash has been fired by initEvent, for '"+t+"' with cookie '"+n+"'."),this._queueStatus[t]=!0,this._queue.shift()},initEvent:function(e){var t=this,i=(this._findInWindowVar(e),e.event_tag||""),n=Cookies.get(this._cookie(i),{domain:this.domain});void 0===n&&(n="");e=t._baseURL+"?action=events.initEvent&hash="+n+"&resolution="+screen.width+"x"+screen.height+"&"+t._prepareQS(e)+"&api_id="+this.apiId+this._referrer;""!=this._ident&&(e+="&ident="+this._ident),t._insertScript(e,function(){t._debug("initEvent has been fired for '"+i+"' with cookie '"+n+"'."),t._init_hash(window._mailkit[0][1]),window._mailkit=[]})},resetEvent:function(e){var t=e.event_tag;this._debug("Reset Event Fired for ",t);var i=this;Cookies.remove(i._cookie(t),{domain:i.domain}),this._queue.shift(),setTimeout(function(){i.initEvent({event_tag:t})},500)},_startQueueProcessor:function(){var i=this;window.setInterval(function(){if(0===i._queue.length||i._queue[0].started)return!1;var t=i._queue[0].data;i._queue[0].started=!0;var e=t[1];try{i[t[0]](e)}catch(e){console.log(e),i._debug("Invalid method call: "+t[0]+".")}},1)},_startDataLayerWatcher:function(){var r=this;if(void 0===parent.window._mailkit)return!1;window.parent._mailkit.push(["initEvent",{event_tag:r._defaultDLEventTag}]),setTimeout(function(){window.setInterval(function(){if(!(void 0===window.parent.dataLayer||window.parent.dataLayer.length<1)){var e,t,i,n=parent.window.dataLayer;for(e in n)if(r._dataLayerProcessed.indexOf(e)<0&&void 0!==n[e].event){if(n[e].event==r.DLViewItemTag)for(i in t=n[e].ecommerce.detail.products){var o=t[i];r._dataLayerProcessed.push(e),r._pushItem(o,"viewItem")}if(n[e].event==r.DLAddItemTag)for(i in t=n[e].ecommerce.add.products){o=t[i];r._dataLayerProcessed.push(e),r._pushItem(o,"addItemU")}if(n[e].event==r.DLRemoveItemTag)for(i in t=n[e].ecommerce.remove.products){o=t[i];r._dataLayerProcessed.push(e),r._pushItem(o,"removeItemU")}if(n[e].event==r.DLCheckoutTag){r._dataLayerProcessed.push(e);try{r._refreshProducts(n[e].ecommerce.checkout.products,n[e].ecommerce.checkout.currencyCode)}catch(e){console.log(e)}}if(n[e].event==r.DLFinishEventTag){r._dataLayerProcessed.push(e);try{r._refreshProducts(n[e].ecommerce.purchase.products,n[e].ecommerce.purchase.currencyCode)}catch(e){}window.parent._mailkit.push(["finishEvent",{event_tag:r._defaultDLEventTag}])}}}},1)},300)},_startQueueAdder:function(){var i=this;window.setInterval(function(){var e,t=window.parent._mailkit;for(e in t){try{if(window.parent._mailkit[e][1].processed)continue}catch(e){continue}void 0!==t[e][1]?(window.parent._mailkit[e][1].processed=!0,-1<i._inArray(t[e][0],["addItem","addItemU","removeItem","removeItemU","clearItems","finishEvent","initEvent","viewItem"])&&i._addToQueue(t[e])):(i._debug("No parameter has been passed to "+t[e][0]+". Ommiting the push."),delete t[e])}},1)},init:function(){var e=this._window._mailkit;try{for(var t in e){if("setAPIID"==e[t][0]&&(this.apiId=e[t][1]),"setDomain"==e[t][0]&&(this.domain=e[t][1]),"DLAddItemTag"==e[t][0]&&(this.DLAddItemTag=e[t][1]),"DLRemoveItemTag"==e[t][0]&&(this.DLRemoveItemTag=e[t][1]),"DLFinishEventTag"==e[t][0]&&(this.DLFinishEventTag=e[t][1]),"enhancedECommerce"==e[t][0]){if("boolean"!=typeof e[t][1])throw"Invalid value for enhancedECommerce. It has to be boolean.";this.enhancedECommerce=e[t][1]}"DLViewItemTag"==e[t][0]&&(this.DLViewItemTag=e[t][1]),"DLClickItemTag"==e[t][0]&&(this.DLClickItemTag=e[t][1]),"recombeeDBName"==e[t][0]&&(this.recombeeDBName=e[t][1]),"endpointUrl"==e[t][0]&&(this._baseURL=e[t][1])}if(null==this.apiId||null==this.domain)throw"setAPIID & setDomain is required"}catch(e){return void this._error(e)}this._getTrkCookie(),Cookies.set(this._cookie("test_cookie"),!0,{domain:this.domain,expires:0}),Cookies.get(this._cookie("test_cookie"))?(Cookies.remove(this._cookie("test_cookie"),{domain:this.domain}),this._startQueueProcessor(),this._startQueueAdder(),this.enhancedECommerce&&this._startDataLayerWatcher()):this._error("Cookies cannot be set in the browser.")},clearItems:function(e){var t=this._findInWindowVar(e),i=e.event_tag||"";if(void 0===this._queueStatus[i])return this._queue.shift(),delete window.parent._mailkit[t],void this._debug("Invalid clearItems call. initEvent not called for event_tag '"+i+"'.");var n=Cookies.get(this._cookie(i),{domain:this.domain});void 0===n&&(n="");var o="?action=events.clearItems&hash="+n+"&";""!=this._ident&&(o+="&ident="+this._ident+"&");var t=this._prepareQS(e),e=document.createElement("img"),r=this;e.addEventListener("load",function(){r._queue.shift(),r._debug("clearItems has been fired for '"+i+"' with cookie '"+n+"'.")}),e.addEventListener("error",function(){r._queue.shift(),r._debug("clearItems call has been rejected.")}),e.src=this._baseURL+o+t+"&api_id="+this.apiId+this._referrer,e.style.display="none",document.body.appendChild(e)},viewItem:function(e){var t=this._findInWindowVar(e),i=e.event_tag||"";if(void 0===this._queueStatus[i])return this._queue.shift(),delete window.parent._mailkit[t],void this._debug("Invalid viewItem call. initEvent not called for event_tag '"+i+"'.");var n=Cookies.get(this._cookie(i),{domain:this.domain});void 0===n&&(n="");var o="?action=events.viewItem&api_id="+this.apiId+"&hash="+n+"&";""!=this._ident&&(o+="&ident="+this._ident+"&");var t=this._prepareQS(e),e=document.createElement("img"),r=this;e.addEventListener("load",function(){r._queue.shift(),r._debug("viewItem has been fired for '"+i+"' with cookie '"+n+"'.")}),e.addEventListener("error",function(){r._queue.shift(),r._debug("viewItem call has been rejected.")}),e.src=this._baseURL+o+t+this._referrer,e.style.display="none",document.body.appendChild(e)},addItem:function(e){var t=this._findInWindowVar(e),i=e.event_tag||"";if(void 0===this._queueStatus[i])return this._queue.shift(),delete window.parent._mailkit[t],void this._debug("Invalid addItem call. initEvent not called for event_tag '"+i+"'.");var n=Cookies.get(this._cookie(i),{domain:this.domain});void 0===n&&(n="");var o="?action=events.addItem&api_id="+this.apiId+"&hash="+n+"&";""!=this._ident&&(o+="&ident="+this._ident+"&");var t=this._prepareQS(e),e=document.createElement("img"),r=this;e.addEventListener("load",function(){r._queue.shift(),r._debug("addItem has been fired for '"+i+"' with cookie '"+n+"'.")}),e.addEventListener("error",function(){r._queue.shift(),r._debug("addItem call has been rejected.")}),e.src=this._baseURL+o+t+this._referrer,e.style.display="none",document.body.appendChild(e)},addItemU:function(e){var t=this._findInWindowVar(e),i=e.event_tag||"";if(void 0===this._queueStatus[i])return this._queue.shift(),delete window.parent._mailkit[t],void this._debug("Invalid addItemU call. initEvent not called for event_tag '"+i+"'.");var n=Cookies.get(this._cookie(i),{domain:this.domain});void 0===n&&(n="");var o="?action=events.addItemU&api_id="+this.apiId+"&hash="+n+"&";""!=this._ident&&(o+="&ident="+this._ident+"&");var t=this._prepareQS(e),e=document.createElement("img"),r=this;e.addEventListener("load",function(){r._queue.shift(),r._debug("addItemU has been fired for '"+i+"' with cookie '"+n+"'.")}),e.addEventListener("error",function(){r._queue.shift(),r._debug("addItemU call has been rejected.")}),e.src=this._baseURL+o+t+this._referrer,e.style.display="none",document.body.appendChild(e)},removeItem:function(e){var t=this._findInWindowVar(e),i=e.event_tag||"";if(void 0===this._queueStatus[i])return this._queue.shift(),delete window.parent._mailkit[t],void this._debug("Invalid removeItem call. initEvent not called for event_tag '"+i+"'.");var n=Cookies.get(this._cookie(i),{domain:this.domain});void 0===n&&(n="");var o="?action=events.removeItem&api_id="+this.apiId+"&hash="+n+"&";""!=this._ident&&(o+="&ident="+this._ident+"&");var t=this._prepareQS(e),e=document.createElement("img"),r=this;e.addEventListener("load",function(){r._queue.shift(),r._debug("removeItem has been fired for '"+i+"' with cookie '"+n+"'.")}),e.addEventListener("error",function(){r._queue.shift(),r._debug("removeItem call has been rejected.")}),e.src=this._baseURL+o+t+this._referrer,e.style.display="none",document.body.appendChild(e)},removeItemU:function(e){var t=this._findInWindowVar(e),i=e.event_tag||"";if(void 0===this._queueStatus[i])return this._queue.shift(),delete window.parent._mailkit[t],void this._debug("Invalid removeItemU call. initEvent not called for event_tag '"+i+"'.");var n=Cookies.get(this._cookie(i),{domain:this.domain});void 0===n&&(n="");var o="?action=events.removeItemU&api_id="+this.apiId+"&hash="+n+"&";""!=this._ident&&(o+="&ident="+this._ident+"&");var t=this._prepareQS(e),e=document.createElement("img"),r=this;e.addEventListener("load",function(){r._queue.shift(),r._debug("removeItemU has been fired for '"+i+"' with cookie '"+n+"'.")}),e.addEventListener("error",function(){r._queue.shift(),r._debug("removeItemU call has been rejected.")}),e.src=this._baseURL+o+t+this._referrer,e.style.display="none",document.body.appendChild(e)},finishEvent:function(e){var t=e.event_tag||"",i=this._findInWindowVar(e);if(void 0===this._queueStatus[t])return this._queue.shift(),delete window.parent._mailkit[i],void this._debug("Invalid finishEvent call. initEvent not called for event_tag '"+t+"'.");var n=this,o=Cookies.get(this._cookie(t),{domain:this.domain});void 0===o&&(o=""),this._debug("finishEvent has been fired for '"+t+"' with cookie '"+o+"'.");var r="?action=events.finishEvent&api_id="+this.apiId+"&hash="+o+"&";""!=this._ident&&(r+="&ident="+this._ident+"&");o=this._prepareQS(e),e=new Image;e.addEventListener("load",function(){n._debug("finishEvent image loaded. deleting cookies."),Cookies.remove(n._cookie(t),{domain:n.domain}),delete n._queueStatus[t],delete window.parent._mailkit[i],n._queue.shift()}),e.addEventListener("error",function(){return n._debug("finishEvent call has been rejected."),n._queue.shift(),!0}),e.src=this._baseURL+r+o+this._referrer,e.style.display="none",document.body.appendChild(e)},_refreshProducts:function(e){for(var t in window.parent._mailkit.push(["clearItems",{event_tag:this._defaultDLEventTag}]),e)this._pushItem(e[t],"addItem")},_pushItem:function(e,t){var i=void 0!==e.price?parseFloat(e.price):0,n=void 0!==e.quantity?parseFloat(e.quantity):0,o=n*i,e={event_tag:this._defaultDLEventTag,name:void 0!==e.name?e.name:"",item_qty:n,price:i,item_total:o,product_id:void 0!==e.id?e.id:0,product_url:void 0!==e.product_url?e.product_url:"",image_url:void 0!==e.image_url?e.image_url:""};window.parent._mailkit.push([t,e])}};mailkitRemarketing.init();